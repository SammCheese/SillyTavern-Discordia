export const __webpack_esm_id__=939;export const __webpack_esm_ids__=[939];export const __webpack_esm_modules__={901(e,a,t){t.a(e,async(e,r)=>{try{t.d(a,{A:()=>d});var i=t(5656),s=t(7140),n=t(5822).V;const{getThumbnailUrl:e,characters:l,default_avatar:o}=await n("@script"),{isValidUrl:c}=await n("@scripts/utils"),u=({groupItem:a,width:t=48,height:r=48,rounded:n=!1})=>{const u=(0,s.useMemo)(()=>{if(!a)return(0,i.jsx)("img",{src:o});if(c(a.avatar_url))return(0,i.jsx)("div",{className:"avatar",title:`[Group] ${a.name}`,children:(0,i.jsx)("img",{loading:"lazy",src:a.avatar_url})});const s=[];if(Array.isArray(a?.members))for(const t of a.members){const a=l.findIndex(e=>e.avatar===t);if(-1!==a&&"none"!==l[a]?.avatar&&s.push(e("avatar",l[a]?.avatar||o)),4===s.length)break}const u=s.length;return u<1?(0,i.jsx)("img",{src:o}):(0,i.jsx)("div",{id:"group_avatars_template",className:`collage_${u} flex flex-wrap `,title:`[Group] ${a.name}`,style:{width:t,height:r,borderRadius:n?"50%":void 0},children:s.map((e,a)=>(0,i.jsx)("img",{className:`img_${a+1} object-cover`,src:e},a))})},[a,t,r,n]);return(0,i.jsx)(i.Fragment,{children:u})},d=(0,s.memo)(u);r()}catch(e){r(e)}},1)},939(e,a,t){t.a(e,async(e,r)=>{try{t.r(a),t.d(a,{default:()=>m});var i=t(5656),s=t(7140),n=t(901),l=t(3825),o=t(5822).V,c=e([n,l]);[n,l]=c.then?(await c)():c;const{getThumbnailUrl:u}=await o("@script"),d=({entity:e,isSelected:a,onClick:t,index:r})=>{const{handleContextMenu:o}=(0,l.V)(e),c=(0,s.useCallback)(()=>{t?.(e,r)},[t,e,r]),d=(0,s.useMemo)(()=>u("avatar",e.item?.avatar||e.id),[e.item?.avatar,e.id]);return(0,i.jsxs)("div",{className:"flex m-0 relative w-full h-fit select-none group",onContextMenu:o,onClick:c,children:[(0,i.jsx)("div",{className:"absolute start-0 top-0 w-2 justify-start items-center flex h-full",children:(0,i.jsx)("span",{className:"w-2 absolute block transition-all ease-in-out duration-200 -ms-1 bg-white rounded-r "+(a?"h-8":"h-0 group-hover:h-6")})}),(0,i.jsx)("div",{className:"cursor-pointer w-full h-fit flex justify-center items-center",children:"group"===e.type?(0,i.jsx)(n.A,{groupItem:e.item,rounded:!0}):(0,i.jsx)("img",{loading:"lazy",alt:e.item?.name||"Character",className:"rounded-xl h-12 w-12 object-cover transition-all "+(a?"outline-1 outline-white":"group-hover:outline-1 group-hover:outline-white"),src:d})})]})},m=(0,s.memo)(d);r()}catch(e){r(e)}},1)},3825(e,a,t){t.a(e,async(e,r)=>{try{t.d(a,{V:()=>p});var i=t(5656),s=t(7140),n=t(2295),l=t(1778),o=t(3696),c=t(5822).V;const e=(0,s.lazy)(()=>t.e(788).then(t.bind(t,4788))),u=(0,s.lazy)(()=>t.e(44).then(t.bind(t,44))),{deleteCharacter:d,eventSource:m}=await c("@script"),{deleteGroup:h}=await c("@scripts/groupChats"),p=a=>{const{showContextMenu:t}=(0,s.useContext)(n.Kh),{openModal:r}=(0,s.useContext)(l.Vs),c=(0,s.useCallback)(async()=>{try{if("character"===a.type){if(!a.item?.avatar)return;await d(a.item.avatar.toString(),{deleteChats:!0})}else if("group"===a.type){if(!a?.id)return;await h(a.id.toString())}m.emit(o.V.ENTITIES_LENGTH_CHANGED)}catch(e){console.error("Error deleting character:",e)}},[a]),p=(0,s.useCallback)(()=>{"character"===a.type?r((0,i.jsx)(e,{avatarName:a.item?.avatar.toString()||""})):"group"===a.type&&r((0,i.jsx)(u,{entity:a}))},[a,r]),v=(0,s.useMemo)(()=>[{label:a.item?.name||"Character",disabled:!0},{label:"---",variant:"separator"},{label:"Edit",onClick:p},{label:"---",variant:"separator"},{label:"Delete",variant:"danger",onClick:c}],[a.item?.name,p,c]);return{handleContextMenu:(0,s.useCallback)(e=>{e.preventDefault(),t(e,v)},[v,t])}};r()}catch(e){r(e)}},1)}};
//# sourceMappingURL=939.bundle.js.map