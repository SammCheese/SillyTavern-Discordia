export const __webpack_esm_id__=939;export const __webpack_esm_ids__=[939];export const __webpack_esm_modules__={901(e,t,a){a.a(e,async(e,r)=>{try{a.d(t,{A:()=>d});var i=a(5656),s=a(7140),n=a(5822).V;const{getThumbnailUrl:e,characters:l,default_avatar:o}=await n("@script"),{isValidUrl:c}=await n("@scripts/utils"),u=({groupItem:t,width:a=48,height:r=48,rounded:n=!1})=>{const u=(0,s.useMemo)(()=>{if(!t)return(0,i.jsx)("img",{src:o});if(c(t.avatar_url))return(0,i.jsx)("div",{className:"avatar",title:`[Group] ${t.name}`,children:(0,i.jsx)("img",{loading:"lazy",src:t.avatar_url})});const s=[];if(Array.isArray(t?.members))for(const a of t.members){const t=l.findIndex(e=>e.avatar===a);if(-1!==t&&"none"!==l[t]?.avatar&&s.push(e("avatar",l[t]?.avatar||o)),4===s.length)break}const u=s.length;return u<1?(0,i.jsx)("img",{src:o}):(0,i.jsx)("div",{id:"group_avatars_template",className:`collage_${u} flex flex-wrap `,title:`[Group] ${t.name}`,style:{width:a,height:r,borderRadius:n?"50%":void 0},children:s.map((e,t)=>(0,i.jsx)("img",{className:`img_${t+1} object-cover`,src:e},t))})},[t,a,r,n]);return(0,i.jsx)(i.Fragment,{children:u})},d=(0,s.memo)(u);r()}catch(e){r(e)}},1)},939(e,t,a){a.a(e,async(e,r)=>{try{a.r(t),a.d(t,{default:()=>m});var i=a(5656),s=a(7140),n=a(901),l=a(6206),o=a(5822).V,c=e([n,l]);[n,l]=c.then?(await c)():c;const{getThumbnailUrl:u}=await o("@script"),d=({entity:e,isSelected:t,onClick:a,index:r})=>{const{handleContextMenu:o}=(0,l.V)(e),c=(0,s.useCallback)(()=>{a?.(e,r)},[a,e,r]),d=(0,s.useMemo)(()=>u("avatar",e.item?.avatar||e.id),[e]);return(0,i.jsxs)("div",{className:"flex m-0 relative w-full h-fit select-none group",onContextMenu:o,onClick:c,children:[(0,i.jsx)("div",{className:"absolute start-0 top-0 w-2 justify-start items-center flex h-full",children:(0,i.jsx)("span",{className:"w-2 absolute block transition-all ease-in-out duration-200 -ms-1 bg-white rounded-r "+(t?"h-8":"h-0 group-hover:h-6")})}),(0,i.jsx)("div",{className:"cursor-pointer w-full h-fit flex justify-center items-center",children:"group"===e.type?(0,i.jsx)(n.A,{groupItem:e.item,rounded:!0}):(0,i.jsx)("img",{loading:"lazy",alt:e.item?.name||"Character",className:"rounded-xl h-12 w-12 object-cover transition-all "+(t?"outline-1 outline-white":"group-hover:outline-1 group-hover:outline-white"),src:d})})]})},m=(0,s.memo)(d);r()}catch(e){r(e)}},1)},6206(e,t,a){a.a(e,async(e,r)=>{try{a.d(t,{V:()=>v});var i=a(5656),s=a(7140),n=a(2295),l=a(1778),o=a(3696),c=a(5822).V;const e=(0,s.lazy)(()=>Promise.resolve().then(a.bind(a,6264))),u=(0,s.lazy)(()=>a.e(44).then(a.bind(a,44))),{deleteCharacter:d,eventSource:m,closeCurrentChat:h}=await c("@script"),{deleteGroup:p}=await c("@scripts/groupChats"),v=t=>{const{showContextMenu:a}=(0,s.useContext)(n.Kh),{openModal:r}=(0,s.useContext)(l.Vs),c=(0,s.useCallback)(async()=>{try{if("character"===t.type){if(!t.item?.avatar)return;const{characterId:e,characters:a}=SillyTavern.getContext(),r=t.item.avatar.toString(),i=a.find(e=>e.avatar?.toString()===r);null!=e&&i&&a[e]===i&&await h(),await d(r,{deleteChats:!0})}else if("group"===t.type){if(!t?.id)return;await p(t.id.toString())}m.emit(o.V.ENTITY_CHANGED)}catch(e){console.error("Error deleting character:",e)}},[t]),v=(0,s.useCallback)(()=>{"character"===t.type?r((0,i.jsx)(e,{avatarName:t.item?.avatar.toString()||""})):"group"===t.type&&r((0,i.jsx)(u,{entity:t}))},[t,r]),g=(0,s.useMemo)(()=>[{label:t.item?.name||"Character",disabled:!0},{label:"---",variant:"separator"},{label:"Edit",onClick:v},{label:"---",variant:"separator"},{label:"Delete",variant:"danger",onClick:c}],[t.item?.name,v,c]);return{handleContextMenu:(0,s.useCallback)(e=>{e.preventDefault(),a(e,g)},[g,a])}};r()}catch(e){r(e)}},1)}};
//# sourceMappingURL=939.bundle.js.map