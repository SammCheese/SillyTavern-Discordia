export const __webpack_esm_id__=8;export const __webpack_esm_ids__=[8];export const __webpack_esm_modules__={2008(e,t,a){a.a(e,async(e,n)=>{try{a.r(t),a.d(t,{default:()=>d});var l=a(5656),i=a(7140),r=a(7955),c=e([r]),s=c.then?(await c)():c;r=s[0];const o=({avatar:e,chat:t,isSelected:a,onClick:n})=>{const{handleContextMenu:c}=(0,r.z)(t),s=(0,i.useCallback)(()=>{n?.(t)},[n,t]);return(0,l.jsx)("li",{className:"border-none list-none relative ms-1 select-none cursor-pointer rounded-lg hover:bg-lighter "+(a?"bg-lighter":""),id:`recent-chat-${t.file_id}`,title:t.file_id,onClick:s,onContextMenu:c,children:(0,l.jsx)("div",{className:"items-stretch flex w-full box-border",children:(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{style:{flex:"1 1 auto",paddingRight:"8px",paddingLeft:"8px"},className:"items-center flex gap-2 min-w-0 overflow-hidden text-ellipsis whitespace-nowrap w-full",children:(0,l.jsxs)("div",{className:"h-12 items-center flex rounded-sm min-w-0 p-0",children:[(0,l.jsx)("img",{loading:"lazy",style:{flex:"0 0 auto"},className:"rounded-4xl h-9 w-9 object-cover flex me-3 justify-center",src:e}),(0,l.jsx)("div",{className:"truncate select-none",children:t?.file_id??t.file_name})]})}),(0,l.jsx)("div",{className:"items-center flex flex-row shrink-0 justify-end box-border ps-px-[16px]",children:(0,l.jsx)("div",{className:"self-center p-0 m-0 hidden me-2 pe-2.5",id:"close-chat-button",children:"x"})})]})})})},d=(0,i.memo)(o);n()}catch(e){n(e)}})},7955(e,t,a){a.a(e,async(e,n)=>{try{a.d(t,{z:()=>u});var l=a(7140),i=a(2295),r=a(3696),c=a(3431),s=a(5822).V;const{deleteCharacterChatByName:e,eventSource:o,closeCurrentChat:d}=await s("@script"),{deleteGroupChatByName:h}=await s("@scripts/groupChats"),u=t=>{const{showContextMenu:a}=(0,l.useContext)(i.Kh),{openPopup:n}=(0,l.useContext)(c.u),s=(0,l.useCallback)(async()=>{const{characters:a,characterId:n,groupId:l}=SillyTavern.getContext();if(t)try{if(null===l||n){let l=t.char_id??n;if(l||(l=a.findIndex(e=>e.avatar===t.avatar)),void 0===l||-1===l)return;await d(),await e(l.toString(),t.file_id)}else await d(),await h(l,t.file_name)}catch(e){console.error("Error deleting chat:",e)}finally{o.emit(r.V.HOME_BUTTON_CLICKED)}},[t]),u=(0,l.useCallback)(()=>{n(null,{title:"Confirm Deletion",confirmText:"Delete",confirmVariant:"danger",cancelText:"Cancel",description:`Are you sure you want to delete the chat "${t.file_name}"? This action cannot be undone.`,onCancel:()=>{},onConfirm:async()=>{await s()}})},[t,n,s]),x=(0,l.useMemo)(()=>[{label:"Open",onClick:()=>{console.log("Open channel:",t.file_id)}},{label:"---",variant:"separator"},{label:"Delete",variant:"danger",onClick:u}],[t,u]);return{handleContextMenu:(0,l.useCallback)(e=>{e.preventDefault(),a(e,x)},[x,a])}};n()}catch(e){n(e)}},1)}};
//# sourceMappingURL=8.bundle.js.map