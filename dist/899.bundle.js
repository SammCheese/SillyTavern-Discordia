export const __webpack_esm_id__=899;export const __webpack_esm_ids__=[899];export const __webpack_esm_modules__={3899(e,t,a){a.a(e,async(e,n)=>{try{a.r(t),a.d(t,{default:()=>z});var i=a(5656),s=a(7140),o=a(1826),r=a(3228),c=a(7963),l=a(1752),d=a(7393),h=a(4673),u=a(9488),x=a(9787),p=a(5822).V,m=e([r,h]);[r,h]=m.then?(await m)():m;const C=s.lazy(()=>a.e(809).then(a.bind(a,7809))),w=(0,s.lazy)(()=>a.e(8).then(a.bind(a,2008))),b=(0,s.lazy)(()=>a.e(911).then(a.bind(a,7911))),g=(0,s.lazy)(()=>a.e(633).then(a.bind(a,2633))),v=(0,s.lazy)(()=>a.e(934).then(a.bind(a,7934))),j=(0,s.lazy)(()=>a.e(348).then(a.bind(a,6348))),y=(0,s.lazy)(()=>a.e(78).then(a.bind(a,3078))),_=(0,s.lazy)(()=>a.e(862).then(a.bind(a,5862))),f=(0,s.lazy)(()=>a.e(342).then(a.bind(a,9342))),{doNewChat:k}=await p("@script"),N=({icons:e,chats:t,setOpen:a,isLoadingChats:n=!1,isInitialLoad:p=!0,context:m})=>{const{openPage:N}=(0,s.useContext)(o.N),{setSearchQuery:z}=(0,l.SQ)(),{openChat:I,isSelectedChat:A}=(0,h.e)(),L=(0,s.useCallback)(e=>{const t=e.id;switch(t){case"#advanced-formatting-button":N((0,i.jsx)(f,{}));break;case"#extensions-settings-button":N((0,i.jsx)(g,{}));break;case"#WI-SP-button":N((0,i.jsx)(v,{}));break;case"#backgrounds-button":N((0,i.jsx)(j,{}));break;case"#persona-management-button":N((0,i.jsx)(y,{}));break;case"#rightNavHolder":N((0,i.jsx)(_,{}));break;default:console.log(`No action defined for icon with id: ${t}`)}},[N]),H=(0,s.useCallback)(async e=>{await I(e),window.innerWidth<=1e3&&a(!1)},[I,a]),P=(0,s.useCallback)(()=>{k(),window.innerWidth<=1e3&&a(!1)},[a]),W=s.useMemo(()=>e?.filter(e=>!e.showInProfile),[e]),T=(0,s.useCallback)(e=>{z(e)},[z]),G=(0,s.useMemo)(()=>t,[t]),M=n||"chat"===m?"Chats":" Recent Chats";return(0,i.jsx)(d.A,{children:(0,i.jsxs)("div",{id:"channel-container",className:"px-1 select-none",children:[(0,i.jsx)(b,{onInput:T}),(0,i.jsx)(C,{}),(0,i.jsx)("div",{id:"channel-header",children:(0,i.jsx)("div",{id:"channel-icons-container",children:W?.map((e,t)=>(0,i.jsx)(S,{icon:e,onClick:L},t))})}),(0,i.jsx)("div",{id:"channel-divider",className:"divider"}),(0,i.jsx)("div",{className:"section-header",children:M}),(0,i.jsx)("div",{id:"channel-list",children:(0,i.jsxs)("div",{id:"channels-list-container",children:[p||n&&(0,i.jsx)(u.z,{borderRadius:"8px",width:"100%",baseColor:"#202025",highlightColor:"#444449",enableAnimation:!0,duration:1,children:(0,i.jsx)(u.A,{count:5,height:48,className:"mx-auto my-2 w-full"})}),G.length>50?(0,i.jsx)(c.B8,{rowComponent:({index:e,style:a})=>{const s=t[e];return(0,i.jsx)("div",{style:a,children:(0,i.jsx)(w,{chat:s,onClick:H,isSelected:A(s),avatar:(0,r.yN)({chat:s}),isLoading:n})})},rowCount:G.length,rowHeight:48,rowProps:{},overscanCount:5,style:{width:"100%"}}):G.map((e,t)=>(0,i.jsx)(w,{chat:e,onClick:H,isSelected:A(e),avatar:(0,r.yN)({chat:e}),isLoading:n},t)),"chat"===m&&!n&&(0,i.jsx)("div",{className:"flex justify-center px-1",children:(0,i.jsx)(x.A,{onClick:P})})]})})]})})},S=s.memo(function({icon:e,onClick:t}){return(0,i.jsxs)("div",{className:"py-2 px-2.5 select-none cursor-pointer font-bold rounded-md mr-1 w-full flex items-center gap-2 group",title:e.title,onClick:()=>{t&&t(e)},children:[(0,i.jsx)("div",{style:{fontSize:"28px"},className:`${e.className} group-hover:opacity-100`}),(0,i.jsx)("div",{className:"group-hover:text-white truncate text-gray-500",children:e.title})]})}),z=s.memo(N);n()}catch(e){n(e)}},1)},4673(e,t,a){a.a(e,async(e,n)=>{try{a.d(t,{e:()=>p});var i=a(7140),s=a(3228),o=a(3696),r=a(5822).V,c=e([s]),l=c.then?(await c)():c;s=l[0];const{closeCurrentChat:d,openCharacterChat:h}=await r("@script"),{openGroupChat:u}=await r("@scripts/groupChats"),{eventSource:x}=await r("@script");function p(){const e=(0,i.useCallback)(e=>{try{const t=e.file_id??e.file_name;return SillyTavern.getContext().chatId===t}catch{return!1}},[]);return{openChat:(0,i.useCallback)(async t=>{if(!t)return;if(e(t))return;if(void 0!==t?.char_id&&t?.char_id>=0||t?.is_group)return x.emit(o.V.CHAT_SWITCH_PENDING),await d(),void(t.is_group?await(0,s.eS)({id:t.group,chat_id:t.file_id}):void 0!==t?.char_id&&await(0,s.yG)(t.char_id,t.file_id));const{characterId:a,groupId:n}=SillyTavern.getContext();null!==n?await u(n,t.file_id):a&&await h(t.file_id)},[e]),isSelectedChat:e}}n()}catch(m){n(m)}},1)},9787(e,t,a){a.d(t,{A:()=>s});var n=a(5656),i=a(7140);const s=(0,i.memo)(({onClick:e})=>{const t=(0,i.useCallback)(()=>{e()},[e]);return(0,n.jsx)("button",{className:"w-full my-2 outline-dashed outline-1 cursor-pointer outline-gray-600 h-12 flex items-center justify-center rounded-md bg-discordia hover:bg-base-discordia-lighter  transition-colors",onClick:t,title:"Start a New Chat",children:(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})})})}};
//# sourceMappingURL=899.bundle.js.map