export const __webpack_esm_id__=899;export const __webpack_esm_ids__=[899];export const __webpack_esm_modules__={3899(e,t,a){a.a(e,async(e,n)=>{try{a.r(t),a.d(t,{default:()=>k});var i=a(5656),s=a(7140),c=a(1826),o=a(3228),r=a(7963),l=a(1752),d=a(7393),h=a(4673),u=a(9488),x=e([o,h]);[o,h]=x.then?(await x)():x;const p=s.lazy(()=>a.e(809).then(a.bind(a,7809))),b=(0,s.lazy)(()=>a.e(8).then(a.bind(a,2008))),C=(0,s.lazy)(()=>a.e(911).then(a.bind(a,7911))),_=(0,s.lazy)(()=>a.e(633).then(a.bind(a,2633))),m=(0,s.lazy)(()=>a.e(934).then(a.bind(a,7934))),y=(0,s.lazy)(()=>a.e(348).then(a.bind(a,6348))),g=(0,s.lazy)(()=>a.e(78).then(a.bind(a,3078))),v=(0,s.lazy)(()=>a.e(862).then(a.bind(a,5862))),w=(0,s.lazy)(()=>a.e(342).then(a.bind(a,9342))),j=({icons:e,chats:t,setOpen:a,isLoadingChats:n=!1,isInitialLoad:x=!0,context:j})=>{const{openPage:k}=(0,s.useContext)(c.N),{setSearchQuery:N}=(0,l.SQ)(),{openChat:S,isSelectedChat:z}=(0,h.e)(),I=(0,s.useCallback)(e=>{const t=e.id;switch(t){case"#advanced-formatting-button":k((0,i.jsx)(w,{}));break;case"#extensions-settings-button":k((0,i.jsx)(_,{}));break;case"#WI-SP-button":k((0,i.jsx)(m,{}));break;case"#backgrounds-button":k((0,i.jsx)(y,{}));break;case"#persona-management-button":k((0,i.jsx)(g,{}));break;case"#rightNavHolder":k((0,i.jsx)(v,{}));break;default:console.log(`No action defined for icon with id: ${t}`)}},[k]),P=(0,s.useCallback)(async e=>{await S(e),window.innerWidth<=1e3&&a(!1)},[S,a]),A=s.useMemo(()=>e?.filter(e=>!e.showInProfile),[e]),H=(0,s.useCallback)(e=>{N(e)},[N]),L=(0,s.useMemo)(()=>t,[t]),T=n||"chat"===j?"Chats":" Recent Chats";return(0,i.jsx)(d.A,{children:(0,i.jsxs)("div",{id:"channel-container",className:"px-1 select-none",children:[(0,i.jsx)(C,{onInput:H}),(0,i.jsx)(p,{}),(0,i.jsx)("div",{id:"channel-header",children:(0,i.jsx)("div",{id:"channel-icons-container",children:A?.map((e,t)=>(0,i.jsx)(f,{icon:e,onClick:I},t))})}),(0,i.jsx)("div",{id:"channel-divider",className:"divider"}),(0,i.jsx)("div",{className:"section-header",children:T}),(0,i.jsx)("div",{id:"channel-list",children:(0,i.jsxs)("div",{id:"channels-list-container",children:[x||n&&(0,i.jsx)(u.z,{borderRadius:"8px",width:"100%",baseColor:"#202025",highlightColor:"#444449",enableAnimation:!0,duration:1,children:(0,i.jsx)(u.A,{count:5,height:48,className:"mx-auto my-2 w-full"})}),L.length>50?(0,i.jsx)(r.B8,{rowComponent:({index:e,style:a})=>{const s=t[e];return(0,i.jsx)("div",{style:a,children:(0,i.jsx)(b,{chat:s,onClick:P,isSelected:z(s),avatar:(0,o.yN)({chat:s}),isLoading:n})})},rowCount:L.length,rowHeight:48,rowProps:{},overscanCount:5,style:{width:"100%"}}):L.map((e,t)=>(0,i.jsx)(b,{chat:e,onClick:P,isSelected:z(e),avatar:(0,o.yN)({chat:e}),isLoading:n},t))]})})]})})},f=s.memo(function({icon:e,onClick:t}){return(0,i.jsxs)("div",{className:"py-2 px-2.5 select-none cursor-pointer font-bold rounded-md mr-1 w-full flex items-center gap-2 group",title:e.title,onClick:()=>{t&&t(e)},children:[(0,i.jsx)("div",{style:{fontSize:"28px"},className:`${e.className} group-hover:opacity-100`}),(0,i.jsx)("div",{className:"group-hover:text-white truncate text-gray-500",children:e.title})]})}),k=s.memo(j);n()}catch(e){n(e)}})},4673(e,t,a){a.a(e,async(e,n)=>{try{a.d(t,{e:()=>p});var i=a(7140),s=a(3228),c=a(3696),o=a(5822).V,r=e([s]),l=r.then?(await r)():r;s=l[0];const{closeCurrentChat:d,openCharacterChat:h}=await o("@script"),{openGroupChat:u}=await o("@scripts/groupChats"),{eventSource:x}=await o("@script");function p(){const e=(0,i.useCallback)(e=>{try{return SillyTavern.getContext().chatId===e.file_id}catch{return!1}},[]);return{openChat:(0,i.useCallback)(async t=>{if(!t)return;if(e(t))return;if(void 0!==t?.char_id&&t?.char_id>=0||t?.is_group)return x.emit(c.V.CHAT_SWITCH_PENDING),await d(),void(t.is_group?await(0,s.eS)({id:t.group,chat_id:t.file_id}):void 0!==t?.char_id&&await(0,s.yG)(t.char_id,t.file_id));const{characterId:a,groupId:n}=SillyTavern.getContext();null!==n?await u(n,t.file_id):a&&await h(t.file_id)},[e]),isSelectedChat:e}}n()}catch(b){n(b)}},1)}};
//# sourceMappingURL=899.bundle.js.map