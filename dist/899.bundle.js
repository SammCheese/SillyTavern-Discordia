export const __webpack_esm_id__=899;export const __webpack_esm_ids__=[899];export const __webpack_esm_modules__={3899(e,t,a){a.a(e,async(e,n)=>{try{a.r(t),a.d(t,{default:()=>S});var i=a(5656),s=a(7140),c=a(1826),r=a(3228),o=a(7963),d=a(1752),l=a(7393),h=a(5822).V,u=e([r]),x=u.then?(await u)():u;r=x[0];const p=s.lazy(()=>a.e(809).then(a.bind(a,7809))),_=(0,s.lazy)(()=>a.e(8).then(a.bind(a,2008))),b=(0,s.lazy)(()=>a.e(911).then(a.bind(a,7911))),g=(0,s.lazy)(()=>a.e(633).then(a.bind(a,2633))),m=(0,s.lazy)(()=>a.e(934).then(a.bind(a,7934))),v=(0,s.lazy)(()=>a.e(348).then(a.bind(a,6348))),y=(0,s.lazy)(()=>a.e(78).then(a.bind(a,3078))),j=(0,s.lazy)(()=>a.e(862).then(a.bind(a,5862))),C=(0,s.lazy)(()=>a.e(342).then(a.bind(a,9342))),{closeCurrentChat:w,openCharacterChat:f}=await h("@script"),{openGroupChat:k}=await h("@scripts/groupChats"),{getContext:N}=SillyTavern,I=({icons:e,chats:t,setOpen:a,isLoadingChats:n=!1})=>{const{openPage:h}=(0,s.useContext)(c.N),{setSearchQuery:u}=(0,d.SQ)(),x=(0,s.useCallback)(e=>{const t=e.id;switch(t){case"#advanced-formatting-button":h((0,i.jsx)(C,{}));break;case"#extensions-settings-button":h((0,i.jsx)(g,{}));break;case"#WI-SP-button":h((0,i.jsx)(m,{}));break;case"#backgrounds-button":h((0,i.jsx)(v,{}));break;case"#persona-management-button":h((0,i.jsx)(y,{}));break;case"#rightNavHolder":h((0,i.jsx)(j,{}));break;default:console.log(`No action defined for icon with id: ${t}`)}},[h]),I=(0,s.useCallback)(e=>N().chatId===e.file_id,[N().chatId]),S=(0,s.useCallback)(async e=>{if(!e)return;if(I(e))return;if(void 0!==e?.char_id&&e?.char_id>=0||e?.is_group)return await w(),void(e.is_group?await(0,r.eS)({id:e.group,chat_id:e.file_id}):void 0!==e?.char_id&&await(0,r.yG)(e.char_id,e.file_id));const{characterId:t,groupId:n}=SillyTavern.getContext();null!==n?await k(n,e.file_id):t&&await f(e.file_id),window.innerWidth<=1e3&&a(!1)},[a,I]),P=s.useMemo(()=>e?.filter(e=>!e.showInProfile),[e]),L=(0,s.useCallback)(e=>{u(e)},[u]),M=(0,s.useMemo)(()=>t,[t]),G=(0,s.useMemo)(()=>{const{characterId:e,groupId:t}=N();return n||e||t?"Chats":"Recent Chats"},[n,N().characterId,N().groupId]);return(0,i.jsx)(l.A,{children:(0,i.jsxs)("div",{id:"channel-container",className:"px-1 select-none",children:[(0,i.jsx)(b,{onInput:L}),(0,i.jsx)(p,{}),(0,i.jsx)("div",{id:"channel-header",children:(0,i.jsx)("div",{id:"channel-icons-container",children:P?.map((e,t)=>(0,i.jsx)(z,{icon:e,onClick:x},t))})}),(0,i.jsx)("div",{id:"channel-divider",className:"divider"}),(0,i.jsx)("div",{className:"section-header",children:G}),(0,i.jsx)("div",{id:"channel-list",children:(0,i.jsx)("div",{id:"channels-list-container",children:M.length>50?(0,i.jsx)(o.B8,{rowComponent:({index:e,style:a})=>{const s=t[e];return(0,i.jsx)("div",{style:a,children:(0,i.jsx)(_,{chat:s,onClick:S,isSelected:I(s),avatar:(0,r.yN)({chat:s}),isLoading:n})})},rowCount:M.length,rowHeight:48,rowProps:{},overscanCount:5,style:{width:"100%"}}):M.map((e,t)=>(0,i.jsx)(_,{chat:e,onClick:S,isSelected:I(e),avatar:(0,r.yN)({chat:e}),isLoading:n},t))})})]})})},z=s.memo(function({icon:e,onClick:t}){return(0,i.jsxs)("div",{className:"py-2 px-2.5 select-none cursor-pointer font-bold rounded-md mr-1 w-full flex items-center gap-2 group",title:e.title,onClick:()=>{t&&t(e)},children:[(0,i.jsx)("div",{style:{fontSize:"28px"},className:`${e.className} group-hover:opacity-100`}),(0,i.jsx)("div",{className:"group-hover:text-white truncate text-gray-500",children:e.title})]})}),S=s.memo(I);n()}catch(e){n(e)}},1)}};
//# sourceMappingURL=899.bundle.js.map