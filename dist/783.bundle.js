export const __webpack_esm_id__=783;export const __webpack_esm_ids__=[552,783];export const __webpack_esm_modules__={1798(e,t,s){s.a(e,async(e,n)=>{try{s.d(t,{C:()=>c});var a=s(3659).V;const{getTextGenServer:e,textgenerationwebui_settings:r,textgen_types:i,SERVER_INPUTS:l}=await a("@scripts/textGenSettings"),{getRequestHeaders:o}=await a("@script"),c=async t=>{const s=$("#api_button_textgenerationwebui"),n=$(`${l[t]}`);s&&n&&(n.val(e(t)),s.trigger("click"));const a=e();if(a||console.warn("No endpoint for status check"),[i.GENERIC,i.OOBA].includes(r.type)&&r.bypass_status_check)return"bypassed";try{const e=await fetch("/api/backends/text-completions/status",{method:"POST",headers:o(),body:JSON.stringify({api_server:a,api_type:r.type})}),t=await e.json();return!(!e.ok||!t?.result)&&t.result}catch(e){return console.error("Error checking text generation server status:",e),!1}};n()}catch(e){n(e)}},1)},2552(e,t,s){s.r(t),s.d(t,{default:()=>r});var n=s(5656),a=s(7140);const r=(0,a.memo)(({placeholder:e="",defaultValue:t="",value:s,label:r="",onChange:i,style:l,disabled:o=!1,id:c="",type:d="text",growHeight:u=!1,maxHeight:p=160,initialHeight:x})=>{const h=s??t??"",g=(0,a.useRef)(null),m=(0,a.useCallback)(e=>{i(e.target.value)},[i]);return(0,a.useEffect)(()=>{u&&g.current&&(g.current.style.height="auto",g.current.style.height=`${Math.min(Math.max(g.current.scrollHeight,x??0),p)}px`)},[h,u,p,x]),(0,n.jsxs)("div",{className:"flex flex-col w-full gap-1 ",style:l,children:[r&&(0,n.jsx)("label",{className:"text-sm font-medium mb-1",htmlFor:c,children:r}),u?(0,n.jsx)("textarea",{ref:g,id:c,disabled:o,style:u?{maxHeight:`${p}px`,overflowY:"auto"}:void 0,className:"input-field grow w-full px-3 py-2 bg-input-bg rounded-md outline outline-input-outline focus:ring-2 focus:ring-input-ring resize-none text-wrap wrap-break-word",placeholder:e,value:h,onChange:m,rows:1}):(0,n.jsx)("input",{contentEditable:u,id:c,disabled:o,className:"input-field w-full px-3 py-2 bg-input-bg rounded-md outline outline-input-outline focus:ring-2 focus:ring-input-ring",placeholder:e,type:d,value:h,onChange:m})]})})},6783(e,t,s){s.a(e,async(e,n)=>{try{s.r(t),s.d(t,{default:()=>w});var a=s(5656),r=s(7140),i=s(7242),l=s(2552),o=s(7200),c=s(8586),d=s(1608),u=s(5200),p=s(1798),x=s(3659).V,h=e([u,p]);[u,p]=h.then?(await h)():h;const g=await x("@scripts/textGenSettings"),{saveSettingsDebounced:m,setOnlineStatus:b}=await x("@script"),{getSecretLabelById:v}=await x("@scripts/secrets"),{getContext:f}=SillyTavern,y=({entries:e})=>{const{selectedProfile:t,updateCurrentProfile:s}=(0,u.H)(),[n,x]=(0,r.useState)(g.textgenerationwebui_settings),[h,y]=(0,r.useState)(void 0),w=(0,r.useMemo)(()=>e.map(e=>({value:e.name,label:e.name})),[e]),_=(0,r.useCallback)((e,t)=>{x(s=>({...s,[e]:t})),f().textCompletionSettings[e]=t,m()},[]),[j,C]=(0,r.useState)(f().extensionSettings.autoConnect),[S,k]=(0,r.useState)(f().powerUserSettings.context_size_derived),[N,A]=(0,r.useState)("");return(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{children:"API Type"}),(0,a.jsx)(i.A,{options:w,onChange:e=>{s({api:e}),_("type",e)},value:n.type}),(0,a.jsx)(d.default,{}),(0,a.jsx)(l.default,{label:"API KEY",placeholder:v(t?.["secret-id"]??"Enter your API Key"),value:N,onChange:e=>{A(e)},type:"password",disabled:!0}),(0,a.jsx)(l.default,{style:{marginTop:"12px"},label:"API URL",placeholder:"Enter your API URL",value:t?.["api-url"],onChange:e=>{y(void 0);const a=t?.api||n.type;_("server_urls",{...n.server_urls,[a]:e}),s({"api-url":e})},type:"text"}),(0,a.jsx)("div",{className:"mt-4",children:(0,a.jsx)(o.A,{label:"Derive Contextsize from Backend",checked:S,onChange:e=>{k(e),f().powerUserSettings.context_size_derived=e,m()}})}),(0,a.jsxs)("div",{className:"flex items-center space-x-4 my-4",children:[(0,a.jsx)(c.A,{label:"Connect",onClick:async()=>{y(void 0);const e=t?.["api-url"];if(!e)return;const n=await(0,p.C)(e);y(n),b(n||"no_connection"),n&&s({model:n})}}),(0,a.jsx)(o.A,{label:"Auto Connect to last Server",checked:j,onChange:e=>{C(e),f().extensionSettings.autoConnect=e,m()}})]}),void 0!==h&&(0,a.jsxs)("div",{className:"text-sm font-medium "+(h?"text-green-400":"text-red-400"),children:["Server is ",h?"Online!":"Offline",h&&(0,a.jsxs)("div",{className:"text-gray-400 text-xs font-normal mt-1",children:["Model: ",h]})]})]})},w=(0,r.memo)(y);n()}catch(e){n(e)}},1)},7200(e,t,s){s.d(t,{A:()=>r});var n=s(5656),a=s(7140);const r=(0,a.memo)(({label:e,checked:t=!1,onChange:s})=>{const[r,i]=(0,a.useState)(t),l=(0,a.useCallback)(e=>{e.stopPropagation();const t=!r;i(t),s&&s(t)},[r,s]);return(0,a.useEffect)(()=>{i(t)},[t]),(0,n.jsx)("div",{className:"flex items-center gap-2",children:(0,n.jsxs)("label",{className:"inline-flex items-center cursor-pointer relative",children:[(0,n.jsx)("input",{type:"checkbox",className:"appearance-none opacity-0 w-6 h-6 left-0 m-0 p-0 top-0",style:{height:"24px !important",width:"24px !important",position:"absolute"},checked:r,onChange:l}),(0,n.jsx)("div",{className:`w-6 h-6  rounded flex items-center justify-center cursor-pointer ${r?"border-blurple":"border-white"} hover:border-blurple border-2`,style:{backgroundColor:r?"var(--color-blurple)":"transparent",border:r?"none":"2px solid var(--color-white)",transition:"all 0.2s ease-in-out"},children:(0,n.jsx)("svg",{"aria-hidden":"true",role:"img",xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",fill:"none",viewBox:"0 0 24 24",children:(0,n.jsx)("path",{fill:r?"white":"transparent",fillRule:"evenodd",d:"M19.06 6.94a1.5 1.5 0 0 1 0 2.12l-8 8a1.5 1.5 0 0 1-2.12 0l-4-4a1.5 1.5 0 0 1 2.12-2.12L10 13.88l6.94-6.94a1.5 1.5 0 0 1 2.12 0Z",clipRule:"evenodd"})})}),(0,n.jsx)("span",{className:"ml-2 text-gray-200",children:e})]})})})}};
//# sourceMappingURL=783.bundle.js.map