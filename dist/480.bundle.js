export const __webpack_esm_id__=480;export const __webpack_esm_ids__=[73,345,480];export const __webpack_esm_modules__={1073(e,t,r){r.r(t),r.d(t,{default:()=>s});var a=r(5656),n=r(7140);const s=(0,n.memo)(({label:e,checked:t=!1,onChange:r})=>{const[s,l]=(0,n.useState)(t),i=(0,n.useCallback)(e=>{e.stopPropagation();const t=!s;l(t),r&&r(t)},[s,r]);return(0,n.useEffect)(()=>{l(t)},[t]),(0,a.jsx)("div",{className:"flex items-center gap-2",children:(0,a.jsxs)("label",{className:"inline-flex items-center cursor-pointer relative",children:[(0,a.jsx)("input",{type:"checkbox",className:"appearance-none opacity-0 w-6 h-6 left-0 m-0 p-0 top-0",style:{height:"24px !important",width:"24px !important",position:"absolute"},checked:s,onChange:i}),(0,a.jsx)("div",{className:"w-6 h-6  rounded flex items-center justify-center ",style:{backgroundColor:s?"var(--color-blurple)":"transparent",border:"2px solid var(--color-blurple)"},children:(0,a.jsx)("svg",{"aria-hidden":"true",role:"img",xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",fill:"none",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{fill:s?"white":"transparent",fillRule:"evenodd",d:"M19.06 6.94a1.5 1.5 0 0 1 0 2.12l-8 8a1.5 1.5 0 0 1-2.12 0l-4-4a1.5 1.5 0 0 1 2.12-2.12L10 13.88l6.94-6.94a1.5 1.5 0 0 1 2.12 0Z",clipRule:"evenodd"})})}),(0,a.jsx)("span",{className:"ml-2 text-gray-200",children:e})]})})})},4345(e,t,r){r.r(t),r.d(t,{default:()=>s});var a=r(5656),n=r(7140);const s=(0,n.memo)(({placeholder:e="",defaultValue:t="",value:r,label:s="",onChange:l,style:i,disabled:o=!1,id:c="",type:d="text",growHeight:u=!1,maxHeight:p=160})=>{const g=r??t??"",h=(0,n.useRef)(null),x=(0,n.useCallback)(e=>{l(e.target.value)},[l]);return(0,n.useEffect)(()=>{u&&h.current&&(h.current.style.height="auto",h.current.style.height=`${Math.min(h.current.scrollHeight,p)}px`)},[g,u,p]),(0,a.jsxs)("div",{className:"flex flex-col w-full gap-1 ",style:i,children:[s&&(0,a.jsx)("label",{className:"text-sm font-medium mb-1",htmlFor:c,children:s}),u?(0,a.jsx)("textarea",{ref:h,id:c,disabled:o,style:u?{maxHeight:`${p}px`,overflowY:"auto"}:void 0,className:"input-field w-full px-3 py-2 bg-input-bg rounded-md outline outline-input-outline focus:ring-2 focus:ring-input-ring resize-none text-wrap wrap-break-word",placeholder:e,value:g,onChange:x,rows:1}):(0,a.jsx)("input",{contentEditable:u,id:c,disabled:o,className:"input-field w-full px-3 py-2 bg-input-bg rounded-md outline outline-input-outline focus:ring-2 focus:ring-input-ring",placeholder:e,type:d,value:g,onChange:x})]})})},4583(e,t,r){r.a(e,async(e,a)=>{try{r.d(t,{C:()=>c});var n=r(5822).V;const{getTextGenServer:e,textgenerationwebui_settings:s,textgen_types:l,SERVER_INPUTS:i}=await n("@scripts/textGenSettings"),{getRequestHeaders:o}=await n("@script"),c=async t=>{const r=$("#api_button_textgenerationwebui"),a=$(`${i[t]}`);r&&a&&(a.val(e(t)),r.trigger("click"));const n=e();if(n||console.warn("No endpoint for status check"),[l.GENERIC,l.OOBA].includes(s.type)&&s.bypass_status_check)return"bypassed";try{const e=await fetch("/api/backends/text-completions/status",{method:"POST",headers:o(),body:JSON.stringify({api_server:n,api_type:s.type})}),t=await e.json();return!(!e.ok||!t?.result)&&t.result}catch(e){return console.error("Error checking text generation server status:",e),!1}};a()}catch(e){a(e)}},1)},5480(e,t,r){r.a(e,async(e,a)=>{try{r.r(t),r.d(t,{default:()=>w});var n=r(5656),s=r(7140),l=r(8699),i=r(4345),o=r(1073),c=r(5599),d=r(7809),u=r(1813),p=r(4583),g=r(5822).V,h=e([u,p]);[u,p]=h.then?(await h)():h;const x=await g("@scripts/textGenSettings"),{saveSettingsDebounced:b,setOnlineStatus:m}=await g("@script"),{getSecretLabelById:v}=await g("@scripts/secrets"),{getContext:f}=SillyTavern,y=({entries:e})=>{const{selectedProfile:t,updateCurrentProfile:r}=(0,u.H)(),[a,g]=(0,s.useState)(x.textgenerationwebui_settings),[h,y]=(0,s.useState)(void 0),w=(0,s.useMemo)(()=>e.map(e=>({value:e.name,label:e.name})),[e]),_=(0,s.useCallback)((e,t)=>{g(r=>({...r,[e]:t})),f().textCompletionSettings[e]=t,b()},[]),[C,S]=(0,s.useState)(f().extensionSettings.autoConnect),[j,k]=(0,s.useState)(f().powerUserSettings.context_size_derived),[N,R]=(0,s.useState)("");return(0,n.jsxs)("div",{children:[(0,n.jsx)("h3",{children:"API Type"}),(0,n.jsx)(l.A,{options:w,onChange:e=>{r({api:e}),_("type",e)},value:a.type}),(0,n.jsx)(d.default,{}),(0,n.jsx)(i.default,{label:"API KEY",placeholder:v(t?.["secret-id"]??"Enter your API Key"),value:N,onChange:e=>{R(e)},type:"password",disabled:!0}),(0,n.jsx)(i.default,{style:{marginTop:"12px"},label:"API URL",placeholder:"Enter your API URL",value:t?.["api-url"],onChange:e=>{y(void 0);const n=t?.api||a.type;_("server_urls",{...a.server_urls,[n]:e}),r({"api-url":e})},type:"text"}),(0,n.jsx)("div",{className:"mt-4",children:(0,n.jsx)(o.default,{label:"Derive Contextsize from Backend",checked:j,onChange:e=>{k(e),f().powerUserSettings.context_size_derived=e,b()}})}),(0,n.jsxs)("div",{className:"flex items-center space-x-4 my-4",children:[(0,n.jsx)(c.A,{label:"Connect",onClick:async()=>{y(void 0);const e=t?.["api-url"];if(!e)return;const a=await(0,p.C)(e);y(a),m(a||"no_connection"),a&&r({model:a})}}),(0,n.jsx)(o.default,{label:"Auto Connect to last Server",checked:C,onChange:e=>{S(e),f().extensionSettings.autoConnect=e,b()}})]}),void 0!==h&&(0,n.jsxs)("div",{className:"text-sm font-medium "+(h?"text-green-400":"text-red-400"),children:["Server is ",h?"Online!":"Offline",h&&(0,n.jsxs)("div",{className:"text-gray-400 text-xs font-normal mt-1",children:["Model: ",h]})]})]})},w=(0,s.memo)(y);a()}catch(e){a(e)}},1)},5599(e,t,r){r.d(t,{A:()=>l,m:()=>a});var a,n=r(5656),s=r(7140);!function(e){e.DANGER="danger",e.PRIMARY="primary",e.SECONDARY="secondary",e.TRANSPARENT="transparent"}(a||(a={}));const l=(0,s.memo)(({label:e,onClick:t,children:r,disabled:l=!1,look:i=a.PRIMARY})=>{const o=(0,s.useCallback)(()=>{!l&&t&&t()},[l,t]),c=(0,s.useCallback)(()=>{switch(i){case a.DANGER:return"bg-red-600 hover:bg-red-700 border-red-700";case a.SECONDARY:return"bg-gray-600 hover:bg-gray-700 border-gray-700";case a.PRIMARY:return"hover:bg-blurple-lighter bg-blurple border-blurple";case a.TRANSPARENT:return"bg-transparent hover:border-blurple border-white";default:return"hover:bg-blurple-lighter bg-blurple border-blurple"}},[i]),d=(0,s.useMemo)(()=>c(),[c]);return(0,n.jsx)("button",{className:`px-4 py-2 text-white font-bold border cursor-pointer rounded disabled:opacity-50 ${d}`,onClick:o,disabled:l,children:e||r})})}};
//# sourceMappingURL=480.bundle.js.map