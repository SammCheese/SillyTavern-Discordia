export const __webpack_esm_id__=480;export const __webpack_esm_ids__=[345,480];export const __webpack_esm_modules__={1073(e,t,r){r.d(t,{A:()=>s});var n=r(5656),a=r(7140);const s=(0,a.memo)(({label:e,checked:t=!1,onChange:r})=>{const[s,l]=(0,a.useState)(t),i=(0,a.useCallback)(e=>{e.stopPropagation();const t=!s;l(t),r&&r(t)},[s,r]);return(0,a.useEffect)(()=>{l(t)},[t]),(0,n.jsx)("div",{className:"flex items-center gap-2",children:(0,n.jsxs)("label",{className:"inline-flex items-center cursor-pointer relative",children:[(0,n.jsx)("input",{type:"checkbox",className:"appearance-none opacity-0 w-6 h-6 left-0 m-0 p-0 top-0",style:{height:"24px !important",width:"24px !important",position:"absolute"},checked:s,onChange:i}),(0,n.jsx)("div",{className:`w-6 h-6  rounded flex items-center justify-center cursor-pointer ${s?"border-blurple":"border-white"} hover:border-blurple border-2`,style:{backgroundColor:s?"var(--color-blurple)":"transparent",border:s?"none":"2px solid var(--color-white)",transition:"all 0.2s ease-in-out"},children:(0,n.jsx)("svg",{"aria-hidden":"true",role:"img",xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",fill:"none",viewBox:"0 0 24 24",children:(0,n.jsx)("path",{fill:s?"white":"transparent",fillRule:"evenodd",d:"M19.06 6.94a1.5 1.5 0 0 1 0 2.12l-8 8a1.5 1.5 0 0 1-2.12 0l-4-4a1.5 1.5 0 0 1 2.12-2.12L10 13.88l6.94-6.94a1.5 1.5 0 0 1 2.12 0Z",clipRule:"evenodd"})})}),(0,n.jsx)("span",{className:"ml-2 text-gray-200",children:e})]})})})},4345(e,t,r){r.r(t),r.d(t,{default:()=>s});var n=r(5656),a=r(7140);const s=(0,a.memo)(({placeholder:e="",defaultValue:t="",value:r,label:s="",onChange:l,style:i,disabled:o=!1,id:c="",type:d="text",growHeight:u=!1,maxHeight:p=160,initialHeight:h})=>{const g=r??t??"",b=(0,a.useRef)(null),x=(0,a.useCallback)(e=>{l(e.target.value)},[l]);return(0,a.useEffect)(()=>{u&&b.current&&(b.current.style.height="auto",b.current.style.height=`${Math.min(Math.max(b.current.scrollHeight,h??0),p)}px`)},[g,u,p,h]),(0,n.jsxs)("div",{className:"flex flex-col w-full gap-1 ",style:i,children:[s&&(0,n.jsx)("label",{className:"text-sm font-medium mb-1",htmlFor:c,children:s}),u?(0,n.jsx)("textarea",{ref:b,id:c,disabled:o,style:u?{maxHeight:`${p}px`,overflowY:"auto"}:void 0,className:"input-field grow w-full px-3 py-2 bg-input-bg rounded-md outline outline-input-outline focus:ring-2 focus:ring-input-ring resize-none text-wrap wrap-break-word",placeholder:e,value:g,onChange:x,rows:1}):(0,n.jsx)("input",{contentEditable:u,id:c,disabled:o,className:"input-field w-full px-3 py-2 bg-input-bg rounded-md outline outline-input-outline focus:ring-2 focus:ring-input-ring",placeholder:e,type:d,value:g,onChange:x})]})})},4583(e,t,r){r.a(e,async(e,n)=>{try{r.d(t,{C:()=>c});var a=r(5822).V;const{getTextGenServer:e,textgenerationwebui_settings:s,textgen_types:l,SERVER_INPUTS:i}=await a("@scripts/textGenSettings"),{getRequestHeaders:o}=await a("@script"),c=async t=>{const r=$("#api_button_textgenerationwebui"),n=$(`${i[t]}`);r&&n&&(n.val(e(t)),r.trigger("click"));const a=e();if(a||console.warn("No endpoint for status check"),[l.GENERIC,l.OOBA].includes(s.type)&&s.bypass_status_check)return"bypassed";try{const e=await fetch("/api/backends/text-completions/status",{method:"POST",headers:o(),body:JSON.stringify({api_server:a,api_type:s.type})}),t=await e.json();return!(!e.ok||!t?.result)&&t.result}catch(e){return console.error("Error checking text generation server status:",e),!1}};n()}catch(e){n(e)}},1)},5480(e,t,r){r.a(e,async(e,n)=>{try{r.r(t),r.d(t,{default:()=>w});var a=r(5656),s=r(7140),l=r(8699),i=r(4345),o=r(1073),c=r(5599),d=r(7809),u=r(1813),p=r(4583),h=r(5822).V,g=e([u,p]);[u,p]=g.then?(await g)():g;const b=await h("@scripts/textGenSettings"),{saveSettingsDebounced:x,setOnlineStatus:m}=await h("@script"),{getSecretLabelById:v}=await h("@scripts/secrets"),{getContext:y}=SillyTavern,f=({entries:e})=>{const{selectedProfile:t,updateCurrentProfile:r}=(0,u.H)(),[n,h]=(0,s.useState)(b.textgenerationwebui_settings),[g,f]=(0,s.useState)(void 0),w=(0,s.useMemo)(()=>e.map(e=>({value:e.name,label:e.name})),[e]),_=(0,s.useCallback)((e,t)=>{h(r=>({...r,[e]:t})),y().textCompletionSettings[e]=t,x()},[]),[C,S]=(0,s.useState)(y().extensionSettings.autoConnect),[j,k]=(0,s.useState)(y().powerUserSettings.context_size_derived),[N,A]=(0,s.useState)("");return(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{children:"API Type"}),(0,a.jsx)(l.A,{options:w,onChange:e=>{r({api:e}),_("type",e)},value:n.type}),(0,a.jsx)(d.default,{}),(0,a.jsx)(i.default,{label:"API KEY",placeholder:v(t?.["secret-id"]??"Enter your API Key"),value:N,onChange:e=>{A(e)},type:"password",disabled:!0}),(0,a.jsx)(i.default,{style:{marginTop:"12px"},label:"API URL",placeholder:"Enter your API URL",value:t?.["api-url"],onChange:e=>{f(void 0);const a=t?.api||n.type;_("server_urls",{...n.server_urls,[a]:e}),r({"api-url":e})},type:"text"}),(0,a.jsx)("div",{className:"mt-4",children:(0,a.jsx)(o.A,{label:"Derive Contextsize from Backend",checked:j,onChange:e=>{k(e),y().powerUserSettings.context_size_derived=e,x()}})}),(0,a.jsxs)("div",{className:"flex items-center space-x-4 my-4",children:[(0,a.jsx)(c.A,{label:"Connect",onClick:async()=>{f(void 0);const e=t?.["api-url"];if(!e)return;const n=await(0,p.C)(e);f(n),m(n||"no_connection"),n&&r({model:n})}}),(0,a.jsx)(o.A,{label:"Auto Connect to last Server",checked:C,onChange:e=>{S(e),y().extensionSettings.autoConnect=e,x()}})]}),void 0!==g&&(0,a.jsxs)("div",{className:"text-sm font-medium "+(g?"text-green-400":"text-red-400"),children:["Server is ",g?"Online!":"Offline",g&&(0,a.jsxs)("div",{className:"text-gray-400 text-xs font-normal mt-1",children:["Model: ",g]})]})]})},w=(0,s.memo)(f);n()}catch(e){n(e)}},1)},5599(e,t,r){r.d(t,{A:()=>l,m:()=>n});var n,a=r(5656),s=r(7140);!function(e){e.DANGER="danger",e.PRIMARY="primary",e.SECONDARY="secondary",e.TRANSPARENT="transparent"}(n||(n={}));const l=(0,s.memo)(({label:e,onClick:t,children:r,disabled:l=!1,look:i=n.PRIMARY})=>{const o=(0,s.useCallback)(()=>{!l&&t&&t()},[l,t]),c=(0,s.useCallback)(()=>{switch(i){case n.DANGER:return"bg-red-600 hover:bg-red-700 border-red-700";case n.SECONDARY:return"bg-gray-600 hover:bg-gray-700 border-gray-700";case n.PRIMARY:return"hover:bg-blurple-lighter bg-blurple border-blurple";case n.TRANSPARENT:return"bg-transparent hover:border-blurple border-white";default:return"hover:bg-blurple-lighter bg-blurple border-blurple"}},[i]),d=(0,s.useMemo)(()=>c(),[c]);return(0,a.jsx)("button",{className:`px-4 py-2 text-white font-bold border cursor-pointer rounded disabled:opacity-50 ${d}`,onClick:o,disabled:l,children:e||r})})}};
//# sourceMappingURL=480.bundle.js.map