export const __webpack_esm_id__=989;export const __webpack_esm_ids__=[989];export const __webpack_esm_modules__={4284(e,l,o){o.d(l,{A:()=>r});var n=o(2615),a=o(9471);const r=(0,a.memo)(({label:e,checked:l=!1,onChange:o})=>{const[r,i]=(0,a.useState)(l),s=(0,a.useCallback)(e=>{e.stopPropagation();const l=!r;i(l),o&&o(l)},[r,o]);return(0,a.useEffect)(()=>{i(l)},[l]),(0,n.jsx)("div",{className:"flex items-center gap-2",children:(0,n.jsxs)("label",{className:"inline-flex items-center cursor-pointer relative",children:[(0,n.jsx)("input",{type:"checkbox",className:"appearance-none opacity-0 w-6 h-6 left-0 m-0 p-0 top-0",style:{height:"24px !important",width:"24px !important",position:"absolute"},checked:r,onChange:s}),(0,n.jsx)("div",{className:`w-6 h-6  rounded flex items-center justify-center cursor-pointer ${r?"border-blurple":"border-white"} hover:border-blurple border-2`,style:{backgroundColor:r?"var(--color-blurple)":"transparent",border:r?"none":"2px solid var(--color-white)",transition:"all 0.2s ease-in-out"},children:(0,n.jsx)("svg",{"aria-hidden":"true",role:"img",xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",fill:"none",viewBox:"0 0 24 24",children:(0,n.jsx)("path",{fill:r?"white":"transparent",fillRule:"evenodd",d:"M19.06 6.94a1.5 1.5 0 0 1 0 2.12l-8 8a1.5 1.5 0 0 1-2.12 0l-4-4a1.5 1.5 0 0 1 2.12-2.12L10 13.88l6.94-6.94a1.5 1.5 0 0 1 2.12 0Z",clipRule:"evenodd"})})}),(0,n.jsx)("span",{className:"ml-2 text-gray-200",children:e})]})})})},4774(e,l,o){o.d(l,{A:()=>r});var n=o(2615),a=o(9471);const r=(0,a.memo)(({options:e=[],value:l,onChange:o,disabled:r})=>{const i=(0,a.useCallback)(e=>{o&&o(e.target.value)},[o]);return(0,n.jsx)("select",{className:"border border-gray-300 rounded bg-white disabled:bg-gray-100 disabled:cursor-not-allowed",value:l,onChange:i,disabled:r,children:e.map(e=>(0,n.jsx)("option",{value:e.value,children:e.label},e.value))})})},9320(e,l,o){o.d(l,{A:()=>r});var n=o(2615),a=o(9471);const r=(0,a.memo)(({min:e,max:l,step:o,value:r,onChange:i})=>{const s=(0,a.useCallback)(e=>{i?.(Number(e.target.value))},[i]);return(0,n.jsx)("div",{className:"flex flex-col gap-2",children:(0,n.jsxs)("div",{className:"flex flex-row items-center gap-4",children:[(0,n.jsx)("input",{type:"range",className:"w-full h-2 bg-base-discordia-lighter rounded-lg appearance-none cursor-pointer range-thumb:hover:scale-110 transition-all",min:e,max:l,step:o,value:r,onChange:s}),(0,n.jsx)("div",{className:"w-16 text-center",children:(0,n.jsx)("input",{type:"number",className:"w-full bg-base-discordia-lighter text-white text-center rounded-md p-1 border border-gray-600",value:r,onChange:s})})]})})})},3068(e,l,o){o.d(l,{A:()=>r});var n=o(2615),a=o(9471);const r=(0,a.memo)(({inactiveEntries:e,activeEntries:l,activeLabel:o="Active Entries",inactiveLabel:r="Inactive Entries",onStackChange:i})=>{const[s,t]=(0,a.useState)(l||[]),[c,d]=(0,a.useState)(e||[]),_=(0,a.useCallback)((e,l)=>{t(e),d(l),i?.(e,l)},[i]),h=(0,a.useCallback)(e=>{const l=[...s,e],o=c.filter(l=>l!==e);_(l,o)},[s,c,_]),m=(0,a.useCallback)(e=>{const l=[...c,e],o=s.filter(l=>l!==e);_(o,l)},[s,c,_]);return(0,n.jsxs)("div",{className:"flex flex-row w-full h-96 rounded overflow-hidden flex-nowrap border border-lighter",children:[(0,n.jsxs)("div",{className:"flex flex-col overflow-auto w-full h-full border-r border-lighter",children:[(0,n.jsx)("div",{className:"mb-2 border-b border-gray-300",children:(0,n.jsx)("h3",{className:"text-lg font-semibold p-2 text-center",children:o})}),(0,n.jsx)("div",{className:"flex flex-col overflow-auto w-full h-full",children:s.map((e,l)=>(0,n.jsxs)("div",{className:"p-2 flex hover:bg-base-discordia-lighter",children:[(0,n.jsx)("div",{className:"truncate content-center",children:e}),(0,n.jsx)("div",{className:"ml-auto",children:(0,n.jsx)("button",{className:"px-2 py-1 bg-red-500 text-white rounded cursor-pointer",onClick:m.bind(null,e),children:"â€”"})})]},e.toString()||l))})]}),(0,n.jsxs)("div",{className:"flex flex-col mt-auto overflow-auto w-full h-full",children:[(0,n.jsx)("div",{className:"mb-2 border-b border-gray-300",children:(0,n.jsx)("h3",{className:"text-lg font-semibold p-2 text-center",children:r})}),(0,n.jsx)("div",{className:"flex flex-col overflow-auto w-full h-full",children:c.map((e,l)=>(0,n.jsxs)("div",{className:"p-2 flex hover:bg-base-discordia-lighter",children:[(0,n.jsx)("div",{className:"truncate content-center",children:e}),(0,n.jsx)("div",{className:"ml-auto",children:(0,n.jsx)("button",{className:"px-2 py-1 bg-green-500 text-white rounded cursor-pointer",onClick:h.bind(null,e),children:"+"})})]},e.toString()||l))})]})]})})},606(e,l,o){o.a(e,async(e,n)=>{try{o.d(l,{A:()=>h});var a=o(2615),r=o(9471),i=o(4284),s=o(4774),t=o(9320),c=o(3575).V;const{getWorldInfoSettings:e}=await c("@scripts/worldInfo"),d=[{label:"Evenly",value:0},{label:"Character First",value:1},{label:"Global First",value:2}],_=({settings:e,handleSettingsChange:l})=>(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{className:"block mb-2 font-medium",children:"Insertion Strategy"}),(0,a.jsx)(s.A,{options:d,value:e.world_info_character_strategy,onChange:e=>l("world_info_character_strategy",e)})]}),(0,a.jsx)("div",{className:"mb-4",children:(0,a.jsx)(i.A,{label:"Include Names",checked:e.world_info_include_names,onChange:e=>{l("world_info_include_names",e)}})}),(0,a.jsx)("div",{className:"mb-4",children:(0,a.jsx)(i.A,{label:"Recursive Scan",checked:e.world_info_recursive,onChange:e=>{l("world_info_recursive",e)}})}),(0,a.jsx)("div",{className:"mb-4",children:(0,a.jsx)(i.A,{label:"Case-sensitive",checked:e.world_info_case_sensitive,onChange:e=>{l("world_info_case_sensitive",e)}})}),(0,a.jsx)("div",{className:"mb-4",children:(0,a.jsx)(i.A,{label:"Match Whole Words",checked:e.world_info_match_whole_words,onChange:e=>{l("world_info_match_whole_words",e)}})}),(0,a.jsx)("div",{className:"mb-4",children:(0,a.jsx)(i.A,{label:"Use Group Scoring",checked:e.world_info_use_group_scoring,onChange:e=>{l("world_info_use_group_scoring",e)}})}),(0,a.jsx)("div",{className:"mb-4",children:(0,a.jsx)(i.A,{label:"Alert on Overflow",checked:e.world_info_overflow_alert,onChange:e=>{l("world_info_overflow_alert",e)}})}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{className:"block mb-2 font-medium",children:"Scan Depth"}),(0,a.jsx)(t.A,{min:0,max:1e3,step:1,value:e.world_info_depth,onChange:e=>l("world_info_depth",e)})]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{className:"block mb-2 font-medium",children:"Context %"}),(0,a.jsx)(t.A,{min:0,max:100,step:1,value:e.world_info_budget,onChange:e=>l("world_info_budget",e)})]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{className:"block mb-2 font-medium",children:"Budget Cap"}),(0,a.jsx)(t.A,{min:0,max:65536,step:1,value:e.world_info_budget_cap,onChange:e=>l("world_info_budget_cap",e)})]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{className:"block mb-2 font-medium",children:"Min Activations"}),(0,a.jsx)(t.A,{min:0,max:100,step:1,value:e.world_info_min_activations,onChange:e=>l("world_info_min_activations",e)})]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{className:"block mb-2 font-medium",children:"Max Depth"}),(0,a.jsx)(t.A,{min:0,max:100,step:1,value:e.world_info_min_activations_depth_max,onChange:e=>l("world_info_min_activations_depth_max",e)})]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{className:"block mb-2 font-medium",children:"Max Recursion Steps"}),(0,a.jsx)(t.A,{min:0,max:10,step:1,value:e.world_info_max_recursion_steps,onChange:e=>l("world_info_max_recursion_steps",e)})]})]}),h=(0,r.memo)(_);n()}catch(e){n(e)}},1)},6989(e,l,o){o.a(e,async(e,n)=>{try{o.r(l),o.d(l,{default:()=>x});var a=o(2615),r=o(9471),i=o(4608),s=o(3068),t=o(606),c=o(3575).V,d=e([t]),_=d.then?(await d)():d;t=_[0];const h=(0,r.lazy)(()=>o.e(898).then(o.bind(o,1898))),m=(0,r.lazy)(()=>o.e(508).then(o.bind(o,8508))),u=(0,r.lazy)(()=>o.e(84).then(o.bind(o,2084))),{getWorldInfoSettings:f,world_names:g}=await c("@scripts/worldInfo"),x=()=>{const e=(0,r.useMemo)(()=>f(),[]),l=g,[o,n]=(0,r.useState)(e.world_info.globalSelect),[c,d]=(0,r.useState)(e),_=(0,r.useCallback)(e=>{n(e),d(l=>({...l,world_info:{globalSelect:e}}))},[n,d]),x=(0,r.useCallback)(()=>{(0,i.I)(c,o)},[c,o]);return(0,a.jsx)(h,{title:"World Info Settings",onClose:x,children:(0,a.jsxs)("div",{className:"settings-section overflow-auto",children:[(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("h2",{className:"text-xl font-bold",children:"Manage Global Entries"}),(0,a.jsx)("p",{className:"text-sm text-gray-400",children:"Select which world info entries are globally active."})]}),(0,a.jsx)("div",{children:(0,a.jsx)(s.A,{inactiveEntries:l.filter(e=>!o.includes(e)),activeEntries:l.filter(e=>o.includes(e)),onStackChange:_,activeLabel:"Global Entries",inactiveLabel:"Inactive Entries"})})]}),(0,a.jsx)(u,{}),(0,a.jsx)(m,{title:"Global World Info Settings",children:(0,a.jsx)(t.A,{settings:c,handleSettingsChange:(e,l)=>{const o={...c,[e]:l};d(o)}})}),(0,a.jsx)(u,{}),(0,a.jsx)("div",{})]})})};n()}catch(e){n(e)}},1)},4608(e,l,o){o.d(l,{I:()=>a});var n=o(3575).V;async function a(e,l){try{const{updateWorldInfoSettings:o}=await n("@scripts/worldInfo");o(e,l)}catch{console.warn("Error importing updateWorldInfoSettings, falling back to DOM"),function(e,l){const{world_info_depth:o,world_info_min_activations:n,world_info_min_activations_depth_max:a,world_info_budget:r,world_info_include_names:i,world_info_recursive:s,world_info_overflow_alert:t,world_info_case_sensitive:c,world_info_match_whole_words:d,world_info_use_group_scoring:_,world_info_character_strategy:h,world_info_budget_cap:m,world_info_max_recursion_steps:u}=e;$("#world_info_depth_counter").val(o),$("#world_info_depth").val(o),$("#world_info_min_activations_counter").val(n),$("#world_info_min_activations").val(n),$("#world_info_min_activations_depth_max_counter").val(a),$("#world_info_min_activations_depth_max").val(a),$("#world_info_budget_counter").val(r),$("#world_info_budget").val(r),$("#world_info_include_names").prop("checked",i),$("#world_info_recursive").prop("checked",s),$("#world_info_overflow_alert").prop("checked",t),$("#world_info_case_sensitive").prop("checked",c),$("#world_info_match_whole_words").prop("checked",d),$("#world_info_use_group_scoring").prop("checked",_),$(`#world_info_character_strategy option[value='${h}']`).prop("selected",!0),$("#world_info_character_strategy").val(h),$("#world_info_budget_cap").val(m),$("#world_info_budget_cap_counter").val(m),$("#world_info_max_recursion_steps").val(u),$("#world_info_max_recursion_steps_counter").val(u);const f=l?.length?l:[];f.length>0&&$("#world_info").empty(),f.forEach((e,o)=>{$("#world_info").append(`<option value='${o}'${l.includes(e)?" selected":""}>${e}</option>`),$("#world_editor_select").append(`<option value='${o}'>${e}</option>`)}),$("#world_info").trigger("change"),$("#world_editor_select").trigger("change"),$("#world_info_depth").trigger("input"),$("#world_info_min_activations").trigger("input"),$("#world_info_min_activations_depth_max").trigger("input"),$("#world_info_budget").trigger("input"),$("#world_info_budget_cap").trigger("input"),$("#world_info_max_recursion_steps").trigger("input"),$("#world_info_include_names").trigger("input"),$("#world_info_recursive").trigger("input"),$("#world_info_case_sensitive").trigger("input"),$("#world_info_match_whole_words").trigger("input"),$("#world_info_overflow_alert").trigger("change"),$("#world_info_character_strategy").trigger("change"),$("#world_info_use_group_scoring").trigger("change")}(e,l)}}}};