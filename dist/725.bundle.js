export const __webpack_esm_id__=725;export const __webpack_esm_ids__=[26,725,986];export const __webpack_esm_modules__={2026:(e,t,s)=>{s.r(t),s.d(t,{default:()=>l});var a=s(2714),n=s(9378);const l=(0,n.memo)(({label:e,checked:t=!1,onChange:s})=>{const[l,r]=(0,n.useState)(t),i=(0,n.useCallback)(e=>{e.stopPropagation();const t=!l;r(t),s&&s(t)},[l,s]);return(0,n.useEffect)(()=>{r(t)},[t]),(0,a.jsx)("div",{className:"flex items-center gap-2",children:(0,a.jsxs)("label",{className:"inline-flex items-center cursor-pointer relative",children:[(0,a.jsx)("input",{type:"checkbox",className:"appearance-none opacity-0 w-6 h-6 left-0 m-0 p-0 top-0",style:{height:"24px !important",width:"24px !important",position:"absolute"},checked:l,onChange:i}),(0,a.jsx)("div",{className:"w-6 h-6  rounded flex items-center justify-center ",style:{backgroundColor:l?"var(--color-blurple)":"transparent",border:"2px solid var(--color-blurple)"},children:(0,a.jsx)("svg",{"aria-hidden":"true",role:"img",xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",fill:"none",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{fill:l?"white":"transparent",fillRule:"evenodd",d:"M19.06 6.94a1.5 1.5 0 0 1 0 2.12l-8 8a1.5 1.5 0 0 1-2.12 0l-4-4a1.5 1.5 0 0 1 2.12-2.12L10 13.88l6.94-6.94a1.5 1.5 0 0 1 2.12 0Z",clipRule:"evenodd"})})}),(0,a.jsx)("span",{className:"ml-2 text-gray-200",children:e})]})})})},2468:(e,t,s)=>{s.a(e,async(e,a)=>{try{s.d(t,{C:()=>c});var n=s(7257).V;const{getTextGenServer:e,textgenerationwebui_settings:l,textgen_types:r,SERVER_INPUTS:i}=await n("@scripts/textGenSettings"),{getRequestHeaders:o}=await n("@script"),c=async t=>{const s=$("#api_button_textgenerationwebui"),a=$(`${i[t]}`);s&&a&&(a.val(e(t)),s.trigger("click"));const n=e();if(n||console.warn("No endpoint for status check"),[r.GENERIC,r.OOBA].includes(l.type)&&l.bypass_status_check)return"bypassed";try{const e=await fetch("/api/backends/text-completions/status",{method:"POST",headers:o(),body:JSON.stringify({api_server:n,api_type:l.type})}),t=await e.json();return!(!e.ok||!t?.result)&&t.result}catch(e){return console.error("Error checking text generation server status:",e),!1}};a()}catch(e){a(e)}},1)},2725:(e,t,s)=>{s.a(e,async(e,a)=>{try{s.r(t),s.d(t,{default:()=>_});var n=s(2714),l=s(9378),r=s(2332),i=s(8986),o=s(2026),c=s(4948),d=s(9122),u=s(7190),p=s(2468),x=s(7257).V,h=e([u,p]);[u,p]=h.then?(await h)():h;const m=await x("@scripts/textGenSettings"),{saveSettingsDebounced:g,setOnlineStatus:b}=await x("@script"),{getSecretLabelById:v}=await x("@scripts/secrets"),{getContext:y}=SillyTavern,f=({entries:e})=>{const{selectedProfile:t,updateCurrentProfile:s}=(0,u.H)(),[a,x]=(0,l.useState)(m.textgenerationwebui_settings),[h,f]=(0,l.useState)(void 0),_=(0,l.useMemo)(()=>e.map(e=>({value:e.name,label:e.name})),[e]),w=(0,l.useCallback)((e,t)=>{x(s=>({...s,[e]:t})),y().textCompletionSettings[e]=t,g()},[]),[C,j]=(0,l.useState)(y().extensionSettings.autoConnect),[S,k]=(0,l.useState)(y().powerUserSettings.context_size_derived),[N,A]=(0,l.useState)("");return(0,n.jsxs)("div",{children:[(0,n.jsx)("h3",{children:"API Type"}),(0,n.jsx)(r.A,{options:_,onChange:e=>{s({api:e}),w("type",e)},value:a.type}),(0,n.jsx)(d.default,{}),(0,n.jsx)(i.default,{label:"API KEY",placeholder:v(t?.["secret-id"]??"Enter your API Key"),value:N,onChange:e=>{A(e)},type:"password",disabled:!0}),(0,n.jsx)(i.default,{style:{marginTop:"12px"},label:"API URL",placeholder:"Enter your API URL",value:t?.["api-url"],onChange:e=>{f(void 0);const n=t?.api||a.type;w("server_urls",{...a.server_urls,[n]:e}),s({"api-url":e})},type:"text"}),(0,n.jsx)("div",{className:"mt-4",children:(0,n.jsx)(o.default,{label:"Derive Contextsize from Backend",checked:S,onChange:e=>{k(e),y().powerUserSettings.context_size_derived=e,g()}})}),(0,n.jsxs)("div",{className:"flex items-center space-x-4 my-4",children:[(0,n.jsx)(c.A,{label:"Connect",onClick:async()=>{f(void 0);const e=t?.["api-url"];if(!e)return;const a=await(0,p.C)(e);f(a),b(a||"no_connection"),a&&s({model:a})}}),(0,n.jsx)(o.default,{label:"Auto Connect to last Server",checked:C,onChange:e=>{j(e),y().extensionSettings.autoConnect=e,g()}})]}),void 0!==h&&(0,n.jsxs)("div",{className:"text-sm font-medium "+(h?"text-green-400":"text-red-400"),children:["Server is ",h?"Online!":"Offline",h&&(0,n.jsxs)("div",{className:"text-gray-400 text-xs font-normal mt-1",children:["Model: ",h]})]})]})},_=(0,l.memo)(f);a()}catch(e){a(e)}},1)},4948:(e,t,s)=>{s.d(t,{A:()=>l});var a=s(2714),n=s(9378);const l=(0,n.memo)(({label:e,onClick:t,disabled:s=!1})=>{const l=(0,n.useCallback)(()=>{!s&&t&&t()},[s,t]);return(0,a.jsx)("button",{className:"px-4 py-2 text-white border hover:border-blue-500 cursor-pointer rounded disabled:opacity-50",onClick:l,disabled:s,children:e})})},8986:(e,t,s)=>{s.r(t),s.d(t,{default:()=>l});var a=s(2714),n=s(9378);const l=(0,n.memo)(({placeholder:e="",defaultValue:t="",value:s,label:l="",onChange:r,style:i,disabled:o=!1,type:c="text"})=>{const[d,u]=(0,n.useState)(s??t??""),p=(0,n.useCallback)(e=>{u(e.target.value),r(e.target.value)},[r]);return(0,a.jsxs)("div",{className:"flex flex-col w-full gap-1 ",style:i,children:[l&&(0,a.jsx)("label",{className:"text-sm font-medium mb-1",children:l}),(0,a.jsx)("input",{disabled:o,className:"input-field w-full px-3 py-2 bg-input-bg rounded-md outline outline-input-outline focus:ring-2 focus:ring-input-ring",placeholder:e,type:c,value:d,onChange:p})]})})}};
//# sourceMappingURL=725.bundle.js.map