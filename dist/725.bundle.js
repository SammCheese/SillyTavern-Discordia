export const __webpack_esm_id__=725;export const __webpack_esm_ids__=[26,725,986];export const __webpack_esm_modules__={2026:(e,t,r)=>{r.r(t),r.d(t,{default:()=>a});var s=r(2714),n=r(9378);const a=(0,n.memo)(({label:e,checked:t=!1,onChange:r})=>{const[a,l]=(0,n.useState)(t),o=(0,n.useCallback)(e=>{e.stopPropagation();const t=!a;l(t),r&&r(t)},[a,r]);return(0,n.useEffect)(()=>{l(t)},[t]),(0,s.jsx)("div",{className:"flex items-center gap-2",children:(0,s.jsxs)("label",{className:"inline-flex items-center cursor-pointer relative",children:[(0,s.jsx)("input",{type:"checkbox",className:"appearance-none opacity-0 w-6 h-6 left-0 m-0 p-0 top-0",style:{height:"24px !important",width:"24px !important",position:"absolute"},checked:a,onChange:o}),(0,s.jsx)("div",{className:"w-6 h-6  rounded flex items-center justify-center ",style:{backgroundColor:a?"var(--color-blurple)":"transparent",border:"2px solid var(--color-blurple)"},children:(0,s.jsx)("svg",{"aria-hidden":"true",role:"img",xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",fill:"none",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{fill:a?"white":"transparent",fillRule:"evenodd",d:"M19.06 6.94a1.5 1.5 0 0 1 0 2.12l-8 8a1.5 1.5 0 0 1-2.12 0l-4-4a1.5 1.5 0 0 1 2.12-2.12L10 13.88l6.94-6.94a1.5 1.5 0 0 1 2.12 0Z",clipRule:"evenodd"})})}),(0,s.jsx)("span",{className:"ml-2 text-gray-200",children:e})]})})})},2468:(e,t,r)=>{r.a(e,async(e,s)=>{try{r.d(t,{C:()=>c});var n=r(7257).V;const{getTextGenServer:e,textgenerationwebui_settings:a,textgen_types:l,SERVER_INPUTS:o}=await n("@scripts/textGenSettings"),{getRequestHeaders:i}=await n("@script"),c=async t=>{const r=$("#api_button_textgenerationwebui"),s=$(`${o[t]}`);r&&s&&(s.val(e(t)),r.trigger("click"));const n=e();if(n||console.warn("No endpoint for status check"),[l.GENERIC,l.OOBA].includes(a.type)&&a.bypass_status_check)return"bypassed";try{const e=await fetch("/api/backends/text-completions/status",{method:"POST",headers:i(),body:JSON.stringify({api_server:n,api_type:a.type})}),t=await e.json();return!(!e.ok||!t?.result)&&t.result}catch(e){return console.error("Error checking text generation server status:",e),!1}};s()}catch(e){s(e)}},1)},2725:(e,t,r)=>{r.a(e,async(e,s)=>{try{r.r(t),r.d(t,{default:()=>w});var n=r(2714),a=r(9378),l=r(2332),o=r(8986),i=r(2026),c=r(4948),d=r(9122),u=r(7190),p=r(2468),g=r(7257).V,h=e([u,p]);[u,p]=h.then?(await h)():h;const x=await g("@scripts/textGenSettings"),{saveSettingsDebounced:b,setOnlineStatus:m}=await g("@script"),{getSecretLabelById:f}=await g("@scripts/secrets"),{getContext:v}=SillyTavern,y=({entries:e})=>{const{selectedProfile:t,updateCurrentProfile:r}=(0,u.H)(),[s,g]=(0,a.useState)(x.textgenerationwebui_settings),[h,y]=(0,a.useState)(void 0),w=(0,a.useMemo)(()=>e.map(e=>({value:e.name,label:e.name})),[e]),_=(0,a.useCallback)((e,t)=>{g(r=>({...r,[e]:t})),v().textCompletionSettings[e]=t,b()},[]),[C,S]=(0,a.useState)(v().extensionSettings.autoConnect),[j,k]=(0,a.useState)(v().powerUserSettings.context_size_derived),[N,R]=(0,a.useState)("");return(0,n.jsxs)("div",{children:[(0,n.jsx)("h3",{children:"API Type"}),(0,n.jsx)(l.A,{options:w,onChange:e=>{r({api:e}),_("type",e)},value:s.type}),(0,n.jsx)(d.default,{}),(0,n.jsx)(o.default,{label:"API KEY",placeholder:f(t?.["secret-id"]??"Enter your API Key"),value:N,onChange:e=>{R(e)},type:"password",disabled:!0}),(0,n.jsx)(o.default,{style:{marginTop:"12px"},label:"API URL",placeholder:"Enter your API URL",value:t?.["api-url"],onChange:e=>{y(void 0);const n=t?.api||s.type;_("server_urls",{...s.server_urls,[n]:e}),r({"api-url":e})},type:"text"}),(0,n.jsx)("div",{className:"mt-4",children:(0,n.jsx)(i.default,{label:"Derive Contextsize from Backend",checked:j,onChange:e=>{k(e),v().powerUserSettings.context_size_derived=e,b()}})}),(0,n.jsxs)("div",{className:"flex items-center space-x-4 my-4",children:[(0,n.jsx)(c.A,{label:"Connect",onClick:async()=>{y(void 0);const e=t?.["api-url"];if(!e)return;const s=await(0,p.C)(e);y(s),m(s||"no_connection"),s&&r({model:s})}}),(0,n.jsx)(i.default,{label:"Auto Connect to last Server",checked:C,onChange:e=>{S(e),v().extensionSettings.autoConnect=e,b()}})]}),void 0!==h&&(0,n.jsxs)("div",{className:"text-sm font-medium "+(h?"text-green-400":"text-red-400"),children:["Server is ",h?"Online!":"Offline",h&&(0,n.jsxs)("div",{className:"text-gray-400 text-xs font-normal mt-1",children:["Model: ",h]})]})]})},w=(0,a.memo)(y);s()}catch(e){s(e)}},1)},4948:(e,t,r)=>{r.d(t,{A:()=>l,m:()=>s});var s,n=r(2714),a=r(9378);!function(e){e.DANGER="danger",e.PRIMARY="primary",e.SECONDARY="secondary",e.TRANSPARENT="transparent"}(s||(s={}));const l=(0,a.memo)(({label:e,onClick:t,children:r,disabled:l=!1,look:o=s.PRIMARY})=>{const i=(0,a.useCallback)(()=>{!l&&t&&t()},[l,t]),c=(0,a.useCallback)(()=>{switch(o){case s.DANGER:return"bg-red-600 hover:bg-red-700 border-red-700";case s.SECONDARY:return"bg-gray-600 hover:bg-gray-700 border-gray-700";case s.PRIMARY:return"hover:bg-blurple-lighter bg-blurple border-blurple";case s.TRANSPARENT:return"bg-transparent hover:border-blurple border-white";default:return"hover:bg-blurple-lighter bg-blurple border-blurple"}},[o]),d=(0,a.useMemo)(()=>c(),[c]);return(0,n.jsx)("button",{className:`px-4 py-2 text-white font-bold border cursor-pointer rounded disabled:opacity-50 ${d}`,onClick:i,disabled:l,children:e||r})})},8986:(e,t,r)=>{r.r(t),r.d(t,{default:()=>a});var s=r(2714),n=r(9378);const a=(0,n.memo)(({placeholder:e="",defaultValue:t="",value:r,label:a="",onChange:l,style:o,disabled:i=!1,id:c="",type:d="text",growHeight:u=!1})=>{const[p,g]=(0,n.useState)(r??t??""),h=(0,n.useRef)(null);(0,n.useEffect)(()=>{void 0!==r&&g(r)},[r]);const x=(0,n.useCallback)(e=>{const t=e.target.value;g(t),l(t)},[l]);return(0,n.useEffect)(()=>{u&&h.current&&(h.current.style.height="auto",h.current.style.height=`${h.current.scrollHeight}px`)},[p,u]),(0,s.jsxs)("div",{className:"flex flex-col w-full gap-1 ",style:o,children:[a&&(0,s.jsx)("label",{className:"text-sm font-medium mb-1",htmlFor:c,children:a}),u?(0,s.jsx)("textarea",{ref:h,id:c,disabled:i,className:"input-field max-h-40 w-full px-3 py-2 bg-input-bg rounded-md outline outline-input-outline focus:ring-2 focus:ring-input-ring resize-none text-wrap wrap-break-word",placeholder:e,value:p,onChange:x,rows:1}):(0,s.jsx)("input",{contentEditable:u,id:c,disabled:i,className:"input-field w-full px-3 py-2 bg-input-bg rounded-md outline outline-input-outline focus:ring-2 focus:ring-input-ring",placeholder:e,type:d,value:p,onChange:x})]})})}};
//# sourceMappingURL=725.bundle.js.map