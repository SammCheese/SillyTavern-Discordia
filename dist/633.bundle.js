export const __webpack_esm_id__=633;export const __webpack_esm_ids__=[633];export const __webpack_esm_modules__={2633(e,n,s){s.a(e,async(e,t)=>{try{s.r(n),s.d(n,{default:()=>p});var a=s(5656),l=s(7140),o=s(5822).V;const i=(0,l.lazy)(()=>s.e(809).then(s.bind(s,7809))),c=(0,l.lazy)(()=>s.e(713).then(s.bind(s,7713))),r=(0,l.lazy)(()=>s.e(279).then(s.bind(s,4279))),d=(0,l.lazy)(()=>s.e(53).then(s.bind(s,6053))),{extension_settings:x,enableExtension:m,disableExtension:b}=await o("@scripts/extensions"),{saveSettingsDebounced:u}=await o("@script");async function h(){try{const e=await fetch("/api/extensions/discover");if(e.ok){return await e.json()}return[]}catch(e){return console.error(e),[]}}const g=(0,l.memo)(function({extension:e,onToggle:n}){const s=(0,l.useMemo)(()=>e.name.replace("third-party/","").replace(/\//g,"_").replace(/\b\w/g,e=>e.toUpperCase()),[e.name]);return(0,a.jsx)(c,{title:s,children:(0,a.jsxs)("div",{className:"p-4 flex items-center justify-between",children:[(0,a.jsx)("label",{htmlFor:`${e.name}-enabled`,children:" Enabled "}),(0,a.jsx)(r,{isOn:!e.disabled,onToggle:n})]})})}),p=()=>{const[e,n]=(0,l.useState)({local:[],global:[],system:[]}),[s,t]=(0,l.useState)(x.disabledExtensions),o=(0,l.useRef)([...x.disabledExtensions]),c=(0,l.useRef)([...x.disabledExtensions]);(0,l.useEffect)(()=>{c.current=s},[s]),(0,l.useEffect)(()=>(h().then(e=>{const s={local:[],global:[],system:[]};Object.values(e).flat().forEach(e=>{const n=e.type in s?e.type:"local";s[n].push({...e,type:n,disabled:c.current.includes(e.name)})}),n(s)}),()=>{u();const e=[...o.current].sort(),n=[...c.current].sort();JSON.stringify(e)!==JSON.stringify(n)&&window.location.reload()}),[]);const r=(0,l.useCallback)(async e=>{console.log("Toggling extension:",e.name);const s=c.current;e.disabled?(await m(e.name,!1),c.current=s.filter(n=>n!==e.name)):(await b(e.name,!1),c.current=[...s,e.name]),t(c.current),n(n=>{const s={...n},t=e.type;return s[t]&&(s[t]=s[t].map(n=>n.name===e.name?{...n,disabled:!n.disabled}:n)),s})},[]);return(0,a.jsx)(d,{title:"Extension Settings",children:(0,a.jsxs)("div",{className:"settings-section overflow-auto",style:{maxHeight:"70dvh"},children:[(0,a.jsx)("h3",{className:"text-2xl font-semibold mb-4",children:"System Extensions"}),(0,a.jsx)("ul",{children:e.system.map(e=>(0,a.jsx)(g,{extension:e,onToggle:()=>r(e)},e.name))}),(0,a.jsx)(i,{}),(0,a.jsx)("h3",{className:"text-2xl font-semibold mb-4",children:"Global Extensions"}),(0,a.jsx)("ul",{children:e.global.map(e=>(0,a.jsx)(g,{extension:e,onToggle:()=>r(e)},e.name))}),(0,a.jsx)(i,{}),(0,a.jsx)("h3",{className:"text-2xl font-semibold mb-4",children:"Local Extensions"}),(0,a.jsx)("ul",{children:e.local.map(e=>(0,a.jsx)(g,{extension:e,onToggle:()=>r(e)},e.name))})]})})};t()}catch(f){t(f)}},1)}};
//# sourceMappingURL=633.bundle.js.map