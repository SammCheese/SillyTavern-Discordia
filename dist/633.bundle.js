export const __webpack_esm_id__=633;export const __webpack_esm_ids__=[633];export const __webpack_esm_modules__={214(e,s,n){async function t(e){const s={},n=[];for(const t of e){const e=new Promise((e,n)=>{fetch(`/scripts/extensions/${t}/manifest.json`).then(async a=>{if(a.ok){const n=await a.json();s[t]=n,e(n)}else n()}).catch(e=>{n(),console.log("Could not load manifest.json for "+t,e)})});n.push(e)}return await Promise.allSettled(n),s}n.d(s,{R:()=>t})},2633(e,s,n){n.a(e,async(e,t)=>{try{n.r(s),n.d(s,{default:()=>p});var a=n(5656),o=n(7140),i=n(9488),l=n(214),c=n(5822).V;const r=(0,o.lazy)(()=>n.e(809).then(n.bind(n,7809))),d=(0,o.lazy)(()=>n.e(713).then(n.bind(n,7713))),x=(0,o.lazy)(()=>n.e(279).then(n.bind(n,4279))),m=(0,o.lazy)(()=>n.e(53).then(n.bind(n,6053))),{extension_settings:u,enableExtension:h,disableExtension:b}=await c("@scripts/extensions"),{saveSettingsDebounced:f}=await c("@script");async function j(){try{const e=await fetch("/api/extensions/discover");if(e.ok){return await e.json()}return[]}catch(e){return console.error(e),[]}}const y=(0,o.memo)(function({extension:e,onToggle:s}){const[n,t]=(0,o.useState)(e.name),[c,r]=(0,o.useState)(!0);(0,o.useEffect)(()=>{let s=!0;return(0,l.R)([e.name]).then(n=>{s&&(t(n[e.name]?.display_name||e.name),r(!1))}),()=>{s=!1}},[]);const m=(0,o.useCallback)(()=>{s(e)},[s,e]);return c?(0,a.jsx)(d,{title:(0,a.jsx)(i.A,{width:150}),children:(0,a.jsxs)("div",{className:"p-4 flex items-center justify-between",children:[(0,a.jsx)("label",{children:(0,a.jsx)(i.A,{width:60})}),(0,a.jsx)(i.A,{width:40,height:20})]})}):(0,a.jsx)(d,{title:n,children:(0,a.jsxs)("div",{className:"p-4 flex items-center justify-between",children:[(0,a.jsx)("label",{htmlFor:`${e.name}-enabled`,children:" Enabled "}),(0,a.jsx)(x,{isOn:!e.disabled,onToggle:m})]})})}),p=()=>{const[e,s]=(0,o.useState)({local:[],global:[],system:[]}),[n,t]=(0,o.useState)(u.disabledExtensions),i=(0,o.useRef)([...u.disabledExtensions]),l=(0,o.useRef)([...u.disabledExtensions]);(0,o.useEffect)(()=>{l.current=n},[n]),(0,o.useEffect)(()=>(j().then(e=>{const n={local:[],global:[],system:[]};Object.values(e).flat().forEach(e=>{const s=e.type in n?e.type:"local";n[s].push({...e,type:s,disabled:l.current.includes(e.name)})}),s(n)}),()=>{f();const e=[...i.current].sort(),s=[...l.current].sort();JSON.stringify(e)!==JSON.stringify(s)&&window.location.reload()}),[]);const c=(0,o.useCallback)(async e=>{const n=l.current;e.disabled?(await h(e.name,!1),l.current=n.filter(s=>s!==e.name)):(await b(e.name,!1),l.current=[...n,e.name]),t(l.current),s(s=>{const n={...s},t=e.type;return n[t]&&(n[t]=n[t].map(s=>s.name===e.name?{...s,disabled:!s.disabled}:s)),n})},[]);return(0,a.jsx)(m,{title:"Extension Settings",children:(0,a.jsxs)("div",{className:"settings-section overflow-auto",style:{maxHeight:"80dvh"},children:[(0,a.jsx)("h3",{className:"text-2xl font-semibold mb-4",children:"System Extensions"}),(0,a.jsx)("ul",{children:e.system.map(e=>(0,a.jsx)(y,{extension:e,onToggle:c},e.name))}),(0,a.jsx)(r,{}),(0,a.jsx)("h3",{className:"text-2xl font-semibold mb-4",children:"Global Extensions"}),(0,a.jsx)("ul",{children:e.global.map(e=>(0,a.jsx)(y,{extension:e,onToggle:c},e.name))}),(0,a.jsx)(r,{}),(0,a.jsx)("h3",{className:"text-2xl font-semibold mb-4",children:"Local Extensions"}),(0,a.jsx)("ul",{children:e.local.map(e=>(0,a.jsx)(y,{extension:e,onToggle:c},e.name))})]})})};t()}catch(g){t(g)}},1)}};
//# sourceMappingURL=633.bundle.js.map