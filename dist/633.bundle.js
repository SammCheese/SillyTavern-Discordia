export const __webpack_esm_id__=633;export const __webpack_esm_ids__=[633];export const __webpack_esm_modules__={214(e,s,n){async function t(e){const s={},n=[];for(const t of e){const e=new Promise((e,n)=>{fetch(`/scripts/extensions/${t}/manifest.json`).then(async a=>{if(a.ok){const n=await a.json();s[t]=n,e(n)}else n()}).catch(e=>{n(),console.log("Could not load manifest.json for "+t,e)})});n.push(e)}return await Promise.allSettled(n),s}n.d(s,{R:()=>t})},2633(e,s,n){n.a(e,async(e,t)=>{try{n.r(s),n.d(s,{default:()=>y});var a=n(5656),l=n(7140),i=n(9488),o=n(214),c=n(5803),r=n(5822).V;const e=(0,l.lazy)(()=>n.e(809).then(n.bind(n,7809))),d=(0,l.lazy)(()=>n.e(713).then(n.bind(n,7713))),x=(0,l.lazy)(()=>n.e(279).then(n.bind(n,4279))),m=(0,l.lazy)(()=>n.e(53).then(n.bind(n,6053))),{extension_settings:u,enableExtension:b,disableExtension:h}=await r("@scripts/extensions"),{saveSettingsDebounced:f}=await r("@script"),j=(0,l.memo)(function({extension:e,onToggle:s}){const[n,t]=(0,l.useState)(e.name),[c,r]=(0,l.useState)(!0);(0,l.useEffect)(()=>{let s=!0;return(0,o.R)([e.name]).then(n=>{s&&(t(n[e.name]?.display_name||e.name),r(!1))}),()=>{s=!1}},[]);const m=(0,l.useCallback)(()=>{s(e)},[s,e]);return c?(0,a.jsx)(d,{title:(0,a.jsx)(i.A,{width:150}),children:(0,a.jsxs)("div",{className:"p-4 flex items-center justify-between",children:[(0,a.jsx)("label",{children:(0,a.jsx)(i.A,{width:60})}),(0,a.jsx)(i.A,{width:40,height:20})]})}):(0,a.jsx)(d,{title:n,children:(0,a.jsxs)("div",{className:"p-4 flex items-center justify-between",children:[(0,a.jsx)("label",{htmlFor:`${e.name}-enabled`,children:" Enabled "}),(0,a.jsx)(x,{isOn:!e.disabled,onToggle:m})]})})}),y=()=>{const[s,n]=(0,l.useState)({local:[],global:[],system:[]}),[t,i]=(0,l.useState)(u.disabledExtensions),o=(0,l.useRef)([...u.disabledExtensions]),r=(0,l.useRef)([...u.disabledExtensions]);(0,l.useEffect)(()=>{r.current=t},[t]),(0,l.useEffect)(()=>{(0,c.q)().then(e=>{const s={local:[],global:[],system:[]};Object.values(e).flat().forEach(e=>{const n=e.type in s?e.type:"local";s[n].push({...e,type:n,disabled:r.current.includes(e.name)})}),n(s)})},[]);const d=(0,l.useCallback)(async e=>{const s=r.current;e.disabled?(await b(e.name,!1),r.current=s.filter(s=>s!==e.name)):(await h(e.name,!1),r.current=[...s,e.name]),i(r.current),n(s=>{const n={...s},t=e.type;return n[t]&&(n[t]=n[t].map(s=>s.name===e.name?{...s,disabled:!s.disabled}:s)),n})},[]),x=(0,l.useCallback)(()=>{f();const e=[...o.current].sort(),s=[...r.current].sort();JSON.stringify(e)!==JSON.stringify(s)&&window.location.reload()},[]);return(0,a.jsx)(m,{title:"Extension Settings",onClose:x,children:(0,a.jsxs)("div",{className:"settings-section ",children:[(0,a.jsx)("h3",{className:"text-2xl font-semibold mb-4",children:"System Extensions"}),(0,a.jsx)("ul",{children:s.system.map(e=>(0,a.jsx)(j,{extension:e,onToggle:d},e.name))}),(0,a.jsx)(e,{}),(0,a.jsx)("h3",{className:"text-2xl font-semibold mb-4",children:"Global Extensions"}),(0,a.jsx)("ul",{children:s.global.map(e=>(0,a.jsx)(j,{extension:e,onToggle:d},e.name))}),(0,a.jsx)(e,{}),(0,a.jsx)("h3",{className:"text-2xl font-semibold mb-4",children:"Local Extensions"}),(0,a.jsx)("ul",{children:s.local.map(e=>(0,a.jsx)(j,{extension:e,onToggle:d},e.name))})]})})};t()}catch(e){t(e)}},1)},5803(e,s,n){async function t(){try{const e=await fetch("/api/extensions/discover");if(e.ok){return await e.json()}return[]}catch(e){return console.error(e),[]}}n.d(s,{q:()=>t})}};
//# sourceMappingURL=633.bundle.js.map