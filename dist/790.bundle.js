export const __webpack_esm_id__=790;export const __webpack_esm_ids__=[790];export const __webpack_esm_modules__={4790:(e,t,a)=>{a.a(e,async(e,n)=>{try{a.r(t),a.d(t,{default:()=>z});var i=a(2714),s=a(9378),r=a(1363),c=a(675),o=a(1833),d=a(2875),l=a(7257).V,h=e([c]),u=h.then?(await h)():h;c=u[0];const x=s.lazy(()=>a.e(122).then(a.bind(a,9122))),p=(0,s.lazy)(()=>a.e(417).then(a.bind(a,4417))),_=(0,s.lazy)(()=>a.e(268).then(a.bind(a,3268))),b=(0,s.lazy)(()=>a.e(466).then(a.bind(a,2466))),g=(0,s.lazy)(()=>a.e(711).then(a.bind(a,1711))),m=(0,s.lazy)(()=>a.e(105).then(a.bind(a,8105))),v=(0,s.lazy)(()=>a.e(839).then(a.bind(a,839))),y=(0,s.lazy)(()=>a.e(71).then(a.bind(a,2071))),C=(0,s.lazy)(()=>a.e(31).then(a.bind(a,1031))),{closeCurrentChat:j,openCharacterChat:w}=await l("@script"),{openGroupChat:f}=await l("@scripts/groupChats"),{getContext:k}=SillyTavern,N=({icons:e,chats:t,setOpen:a,isLoadingChats:n=!1})=>{const{openPage:l}=(0,s.useContext)(r.N),{setSearchQuery:h}=(0,d.SQ)(),u=(0,s.useCallback)(e=>{const t=e.id;switch(t){case"#advanced-formatting-button":l((0,i.jsx)(C,{}));break;case"#extensions-settings-button":l((0,i.jsx)(b,{}));break;case"#WI-SP-button":l((0,i.jsx)(g,{}));break;case"#backgrounds-button":l((0,i.jsx)(m,{}));break;case"#persona-management-button":l((0,i.jsx)(v,{}));break;case"#rightNavHolder":l((0,i.jsx)(y,{}));break;default:console.log(`No action defined for icon with id: ${t}`)}},[l]),N=(0,s.useCallback)(e=>k().chatId===e.file_id,[k().chatId]),z=(0,s.useCallback)(async e=>{if(!e)return;if(N(e))return;if(void 0!==e?.char_id&&e?.char_id>=0||e?.is_group)return await j(),void(e.is_group?await(0,c.eS)({id:e.group,chat_id:e.file_id}):void 0!==e?.char_id&&await(0,c.yG)(e.char_id,e.file_id));const{characterId:t,groupId:n}=SillyTavern.getContext();null!==n?await f(n,e.file_id):t&&await w(e.file_id),window.innerWidth<=1e3&&a(!1)},[a,N]),S=s.useMemo(()=>e?.filter(e=>!e.showInProfile),[e]),P=(0,s.useCallback)(e=>{h(e)},[h]),L=(0,s.useMemo)(()=>t,[t]),M=(0,s.useMemo)(()=>{const{characterId:e,groupId:t}=k();return n||e||t?"Chats":"Recent Chats"},[n,k().characterId,k().groupId]);return(0,i.jsxs)("div",{id:"channel-container",className:"px-1",children:[(0,i.jsx)(_,{onInput:P}),(0,i.jsx)(x,{}),(0,i.jsx)("div",{id:"channel-header",children:(0,i.jsx)("div",{id:"channel-icons-container",children:S?.map((e,t)=>(0,i.jsx)(I,{icon:e,onClick:u},t))})}),(0,i.jsx)("div",{id:"channel-divider",className:"divider"}),(0,i.jsx)("div",{className:"section-header",children:M}),(0,i.jsx)("div",{id:"channel-list",children:(0,i.jsx)("div",{id:"channels-list-container",children:L.length>50?(0,i.jsx)(o.B8,{rowComponent:({index:e,style:a})=>{const s=t[e];return(0,i.jsx)("div",{style:a,children:(0,i.jsx)(p,{chat:s,onClick:z,isSelected:N(s),avatar:(0,c.yN)({chat:s}),isLoading:n})})},rowCount:L.length,rowHeight:48,rowProps:{},overscanCount:5,style:{width:"100%"}}):L.map((e,t)=>(0,i.jsx)(p,{chat:e,onClick:z,isSelected:N(e),avatar:(0,c.yN)({chat:e}),isLoading:n},t))})})]})},I=s.memo(function({icon:e,onClick:t}){return(0,i.jsxs)("div",{className:"py-2 px-2.5 cursor-pointer font-bold rounded-md mr-1 w-full flex items-center gap-2 group",title:e.title,onClick:()=>{t&&t(e)},children:[(0,i.jsx)("div",{style:{fontSize:"28px"},className:`${e.className} group-hover:opacity-100`}),(0,i.jsx)("div",{className:"group-hover:text-white truncate text-gray-500",children:e.title})]})}),z=s.memo(N);n()}catch(e){n(e)}},1)}};
//# sourceMappingURL=790.bundle.js.map