export const __webpack_esm_id__=917;export const __webpack_esm_ids__=[122,917];export const __webpack_esm_modules__={122:(e,t,n)=>{n.r(t),n.d(t,{default:()=>l});var a=n(363);const l=({width:e="w-full",className:t=""})=>a.createElement(a.Fragment,null,a.createElement("div",{style:{backgroundColor:"rgba(255, 255, 255, 0.1)"},className:`${e} h-px my-2 ml-auto mr-auto ${t}`}))},160:(e,t,n)=>{n.a(e,async(e,a)=>{try{n.d(t,{H:()=>c});var l=n(363),o=n(257).V;const{getContext:e}=SillyTavern,{changeMainAPI:r,saveSettingsDebounced:s}=await o("@script"),c=()=>{const[t,n]=l.useState(()=>e().extensionSettings.connectionManager.profiles||[]),[a,o]=l.useState(()=>e().extensionSettings.connectionManager.selectedProfile||""),c=l.useCallback(()=>e().mainApi,[]),i=(0,l.useCallback)(t=>{n(t),e().extensionSettings.connectionManager.profiles=t,s()},[]),d=(0,l.useCallback)(t=>{o(t),e().extensionSettings.connectionManager.selectedProfile=t,s()},[]),u=(0,l.useCallback)(e=>{try{if(1!==r.length)throw new Error("changeMainAPI has unexpected signature, attempting fallback");r(e)}catch{console.warn("Failed to change main API via function, falling back to DOM"),$("#main_api").val(e).trigger("change")}s()},[]);return{profiles:t,selectedProfileId:a,selectedProfile:t.find(e=>e.id===a),getCurrentApi:c,setProfiles:i,setCurrentApi:u,setSelectedProfile:d}};a()}catch(e){a(e)}},1)},332:(e,t,n)=>{n.d(t,{A:()=>l});var a=n(363);const l=a.memo(({options:e=[],value:t,onChange:n,disabled:l})=>a.createElement("select",{className:"border border-gray-300 rounded px-2 py-1 bg-white disabled:bg-gray-100 disabled:cursor-not-allowed",value:t,onChange:e=>{n&&n(e.target.value)},disabled:l},e.map(e=>a.createElement("option",{key:e.value,value:e.value},e.label))))},917:(e,t,n)=>{n.a(e,async(e,a)=>{try{n.r(t),n.d(t,{default:()=>h});var l=n(363),o=n(332),r=n(122),s=n(160),c=n(257).V,i=e([s]),d=i.then?(await i)():i;s=d[0];const u=l.lazy(()=>n.e(468).then(n.bind(n,468))),m=l.lazy(()=>n.e(362).then(n.bind(n,362))),g=await c("@script"),{saveSettingsDebounced:b,CONNECT_API_MAP:v}=g,p=[{value:"textgenerationwebui",label:"Text Completion",short:"tc"},{value:"openai",label:"Chat Completion",short:"cc"},{value:"novel",label:"NovelAI",short:"na"},{value:"koboldhorde",label:"AI Horde",short:"ah"},{value:"kobold",label:"KoboldAI Classic",short:"kc"}],h=()=>{const{profiles:e,selectedProfileId:t,getCurrentApi:n,setCurrentApi:a,setSelectedProfile:c}=(0,s.H)(),[i,d]=l.useState(()=>n());l.useEffect(()=>{d(n())},[t]);const g=l.useMemo(()=>{const e={};return Object.entries(v).forEach(([t,n])=>{const a=n.selected;e[a]||(e[a]=[]),e[a].push({name:t,...n})}),e},[v]),h=l.useMemo(()=>{switch(i){case"kobold":return l.createElement("div",null,"Kobold API Connection Settings");case"openai":return l.createElement("div",null,"OpenAI API Connection Settings");case"novel":return l.createElement("div",null,"Novel API Connection Settings");case"textgenerationwebui":return l.createElement(m,{key:t,entries:g[i]});case"koboldhorde":return l.createElement("div",null,"Kobold Horde API Connection Settings");default:return l.createElement("div",null,"No connection settings available for the selected API.")}},[i,t,g]),f=l.useCallback(()=>e.map(e=>({value:e.id??"",label:e.name??""})),[e]);return l.createElement(u,{title:"Connection Settings"},l.createElement("div",{className:"p-4 space-y-4 overflow-auto flex flex-col"},l.createElement("h2",null,"Profile"),l.createElement(o.A,{options:f(),value:t,onChange:t=>{c(t);const n=e.find(e=>e.id===t)?.mode,l=p.find(e=>e.short===n)?.value;l&&(a(l),d(l)),b()}}),l.createElement(r.default,null),l.createElement("h2",null,"API"),l.createElement(o.A,{options:p,value:i,onChange:e=>{const t=e;a(t),d(t),b()}}),l.createElement(r.default,null),l.createElement("div",{className:"settings-section"},h)))};a()}catch(e){a(e)}},1)}};
//# sourceMappingURL=917.bundle.js.map