export const __webpack_esm_id__=917;export const __webpack_esm_ids__=[122,917];export const __webpack_esm_modules__={122:(e,t,n)=>{n.r(t),n.d(t,{default:()=>o});var a=n(259);n(363);const o=({width:e="w-full",className:t=""})=>(0,a.jsx)(a.Fragment,{children:(0,a.jsx)("div",{style:{backgroundColor:"rgba(255, 255, 255, 0.1)"},className:`${e} h-px my-2 ml-auto mr-auto ${t}`})})},160:(e,t,n)=>{n.a(e,async(e,a)=>{try{n.d(t,{H:()=>h});var o=n(167),s=n.n(o),l=n(363),i=n(257).V;const{getContext:e}=SillyTavern,{changeMainAPI:r,saveSettingsDebounced:c,eventSource:d,event_types:u}=await i("@script"),h=()=>{const[t,n]=(0,l.useState)(()=>e().extensionSettings.connectionManager.profiles||[]),[a,o]=(0,l.useState)(()=>e().extensionSettings.connectionManager.selectedProfile||""),i=()=>t.find(e=>e.id===a),h=(0,l.useCallback)(()=>e().mainApi,[]),g=(0,l.useCallback)(t=>{n(t),e().extensionSettings.connectionManager.profiles=t},[]),b=(0,l.useCallback)(t=>{o(t),e().extensionSettings.connectionManager.selectedProfile=t,d.emit(u.CONNECTION_PROFILE_LOADED,t)},[]),v=(0,l.useCallback)(e=>{try{if(1!==r.length)throw new Error("changeMainAPI has unexpected signature, attempting fallback");r(e)}catch{console.warn("Failed to change main API via function, falling back to DOM"),$("#main_api").val(e).trigger("change")}c()},[]);return(0,l.useEffect)(()=>()=>{c()},[]),{profiles:t,selectedProfileId:a,selectedProfile:i(),updateCurrentProfile:(...e)=>{const n=i();if(!n)return;const a=Object.assign({},n,...e),o=t.map(e=>e.id===n.id?a:e);g(o),c(),s().debounce(()=>{d.emit(u.CONNECTION_PROFILE_UPDATED,a)},300)()},getCurrentApi:h,setProfiles:g,setCurrentApi:v,setSelectedProfile:b}};a()}catch(e){a(e)}},1)},332:(e,t,n)=>{n.d(t,{A:()=>o});var a=n(259);const o=n(363).memo(({options:e=[],value:t,onChange:n,disabled:o})=>(0,a.jsx)("select",{className:"border border-gray-300 rounded bg-white disabled:bg-gray-100 disabled:cursor-not-allowed",value:t,onChange:e=>{n&&n(e.target.value)},disabled:o,children:e.map(e=>(0,a.jsx)("option",{value:e.value,children:e.label},e.value))}))},917:(e,t,n)=>{n.a(e,async(e,a)=>{try{n.r(t),n.d(t,{default:()=>f});var o=n(259),s=n(363),l=n(332),i=n(122),r=n(160),c=n(257).V,d=e([r]),u=d.then?(await d)():d;r=u[0];const h=s.lazy(()=>n.e(468).then(n.bind(n,468))),g=s.lazy(()=>n.e(362).then(n.bind(n,362))),b=await c("@script"),{CONNECT_API_MAP:v}=b,p=[{value:"textgenerationwebui",label:"Text Completion",short:"tc"},{value:"openai",label:"Chat Completion",short:"cc"},{value:"novel",label:"NovelAI",short:"na"},{value:"koboldhorde",label:"AI Horde",short:"ah"},{value:"kobold",label:"KoboldAI Classic",short:"kc"}],f=()=>{const{profiles:e,selectedProfileId:t,getCurrentApi:n,setCurrentApi:a,setSelectedProfile:c}=(0,r.H)(),[d,u]=s.useState(()=>n());s.useEffect(()=>{u(n())},[t]);const b=s.useMemo(()=>{const e={};return Object.entries(v).forEach(([t,n])=>{const a=n.selected;e[a]||(e[a]=[]),e[a].push({name:t,...n})}),e},[v]),f=s.useMemo(()=>{switch(d){case"kobold":return(0,o.jsx)("div",{children:"Kobold API Connection Settings"});case"openai":return(0,o.jsx)("div",{children:"OpenAI API Connection Settings"});case"novel":return(0,o.jsx)("div",{children:"Novel API Connection Settings"});case"textgenerationwebui":return(0,o.jsx)(g,{entries:b[d]},t);case"koboldhorde":return(0,o.jsx)("div",{children:"Kobold Horde API Connection Settings"});default:return(0,o.jsx)("div",{children:"No connection settings available for the selected API."})}},[d,t,b]),x=s.useCallback(()=>e.map(e=>({value:e.id??"",label:e.name??""})),[e]);return(0,o.jsx)(h,{title:"Connection Settings",children:(0,o.jsxs)("div",{className:"p-4 space-y-4 overflow-auto flex flex-col",children:[(0,o.jsx)("h2",{children:"Profile"}),(0,o.jsx)(l.A,{options:x(),value:t,onChange:t=>{c(t);const n=e.find(e=>e.id===t)?.mode,o=p.find(e=>e.short===n)?.value;o&&(a(o),u(o))}}),(0,o.jsx)(i.default,{}),(0,o.jsx)("h2",{children:"API"}),(0,o.jsx)(l.A,{options:p,value:d,onChange:e=>{const t=e;a(t),u(t)}}),(0,o.jsx)(i.default,{}),(0,o.jsx)("div",{className:"settings-section",children:f})]})})};a()}catch(e){a(e)}},1)}};
//# sourceMappingURL=917.bundle.js.map