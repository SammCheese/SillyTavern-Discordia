"use strict";(self.webpackChunkst_discordia=self.webpackChunkst_discordia||[]).push([[466],{466:(e,t,n)=>{n.a(e,async(e,l)=>{try{n.r(t),n.d(t,{default:()=>h});var s=n(363),a=n(257).V;const i=s.lazy(()=>n.e(484).then(n.bind(n,484))),o=s.lazy(()=>n.e(666).then(n.bind(n,285))),c=s.lazy(()=>n.e(328).then(n.bind(n,328))),m=s.lazy(()=>n.e(468).then(n.bind(n,468))),{extension_settings:r,enableExtension:d,disableExtension:b}=await a("@scripts/extensions"),{saveSettingsDebounced:u}=await a("@script");async function E(){try{const e=await fetch("/api/extensions/discover");if(e.ok){return await e.json()}return[]}catch(e){return console.error(e),[]}}const x=({extension:e,enabled:t})=>s.createElement(o,{title:`${e.name}`,isOpen:!1,onToggle:()=>{}},s.createElement("div",{className:"p-4 flex items-center justify-between"},s.createElement("label",{htmlFor:`${e.name}-enabled`}," Enabled "),s.createElement(c,{isOn:!e.disabled,handleToggle:()=>{e.disabled?d(e.name):b(e.name)}}))),h=()=>{const[e,t]=s.useState({local:[],global:[],system:[]});return s.useEffect(()=>{const e=r.disabledExtensions;return E().then(n=>{const l={local:[],global:[],system:[]};n.forEach(t=>{"local"===t.type?l.local.push({...t,disabled:e.includes(t.name)}):"global"===t.type?l.global.push({...t,disabled:e.includes(t.name)}):"system"===t.type&&l.system.push({...t,disabled:e.includes(t.name)})}),t(l)}),()=>{console.log("Extension Settings Unloaded, saving settings."),u()}},[r]),s.createElement(m,{title:"Extension Settings"},s.createElement("div",{className:"settings-section overflow-auto",style:{maxHeight:"70dvh"}},s.createElement("h3",{className:"text-2xl font-semibold mb-4"},"System Extensions"),s.createElement("ul",null,e.system.map(e=>s.createElement(x,{key:e.name,extension:e,enabled:!1}))),s.createElement(i,null),s.createElement("h3",{className:"text-2xl font-semibold mb-4"},"Global Extensions"),s.createElement("ul",null,e.global.map(e=>s.createElement(x,{key:e.name,extension:e,enabled:!1}))),s.createElement(i,null),s.createElement("h3",{className:"text-2xl font-semibold mb-4"},"Local Extensions"),s.createElement("ul",null,e.local.map(e=>s.createElement(x,{key:e.name,extension:e,enabled:!1})))))};l()}catch(y){l(y)}},1)}}]);
//# sourceMappingURL=466.bundle.js.map