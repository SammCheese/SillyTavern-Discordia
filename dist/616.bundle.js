export const __webpack_esm_id__=616;export const __webpack_esm_ids__=[616];export const __webpack_esm_modules__={1616(e,t,n){n.a(e,async(e,a)=>{try{n.r(t),n.d(t,{default:()=>A});var i=n(5656),s=n(7140),o=n(8677),r=n(5987),c=n(5277),l=n(6916),d=n(128),h=n(7426),u=n(9488),x=n(7754),p=n(3659).V,C=e([o,r,h]);[o,r,h]=C.then?(await C)():C;const m=s.lazy(()=>n.e(608).then(n.bind(n,1608))),v=(0,s.lazy)(()=>n.e(435).then(n.bind(n,4435))),b=(0,s.lazy)(()=>n.e(722).then(n.bind(n,7722))),w=(0,s.lazy)(()=>n.e(148).then(n.bind(n,148))),y=(0,s.lazy)(()=>n.e(617).then(n.bind(n,6617))),g=(0,s.lazy)(()=>n.e(43).then(n.bind(n,1043))),j=(0,s.lazy)(()=>n.e(654).then(n.bind(n,1273))),f=(0,s.lazy)(()=>n.e(35).then(n.bind(n,4273))),_=(0,s.lazy)(()=>n.e(761).then(n.bind(n,9761))),{doNewChat:k,eventSource:N,event_types:S}=await p("@script"),z=({icons:e,chats:t,recentChats:n,setOpen:a,isLoadingChats:p=!1,isInitialLoad:C=!0})=>{const[z,A]=s.useState("recent"),{openPage:H}=(0,s.useContext)(o.NQ),{setSearchQuery:T}=(0,l.SQ)(),{openChat:L,isSelectedChat:G}=(0,h.e)(),P=(0,s.useCallback)(e=>{const t=e.id;switch(t){case"#advanced-formatting-button":H((0,i.jsx)(_,{}));break;case"#extensions-settings-button":H((0,i.jsx)(w,{}));break;case"#WI-SP-button":H((0,i.jsx)(y,{}));break;case"#backgrounds-button":H((0,i.jsx)(g,{}));break;case"#persona-management-button":H((0,i.jsx)(j,{}));break;case"#rightNavHolder":H((0,i.jsx)(f,{}));break;default:console.log(`No action defined for icon with id: ${t}`)}},[H]),W=(0,s.useCallback)(async e=>{await L(e),window.innerWidth<=1e3&&a(!1)},[L,a]),E=(0,s.useCallback)(()=>{k(),window.innerWidth<=1e3&&a(!1)},[a]),M=s.useMemo(()=>e?.filter(e=>!e.showInProfile),[e]),Q=(0,s.useCallback)(e=>{T(e)},[T]),B=(0,s.useMemo)(()=>"recent"===z?n:t,[t,n,z]);(0,s.useEffect)(()=>{const e=()=>{const{characterId:e,groupId:t}=SillyTavern.getContext();A(void 0!==e||null!==t?"chat":"recent")};return N.on(S.CHAT_CHANGED,e),()=>{N.removeListener(S.CHAT_CHANGED,e)}},[]);const D="recent"===z?"Recent Chats":"Chats";return(0,i.jsx)(d.A,{children:(0,i.jsxs)("div",{id:"channel-container",className:"px-1 select-none",children:[(0,i.jsx)(b,{onInput:Q}),(0,i.jsx)(m,{}),(0,i.jsx)("div",{id:"channel-header",children:(0,i.jsx)("div",{id:"channel-icons-container",children:M?.map((e,t)=>(0,i.jsx)(I,{icon:e,onClick:P},t))})}),(0,i.jsx)("div",{id:"channel-divider",className:"divider"}),(0,i.jsx)("div",{className:"section-header",children:D}),(0,i.jsx)("div",{id:"channel-list",children:(0,i.jsxs)("div",{id:"channels-list-container",children:[C&&(0,i.jsx)(u.z,{borderRadius:"8px",width:"100%",baseColor:"#202025",highlightColor:"#444449",enableAnimation:!0,duration:1,children:(0,i.jsx)(u.A,{count:5,height:48,className:"mx-auto my-2 w-full"})}),B.length>50?(0,i.jsx)(c.B8,{rowComponent:({index:e,style:n})=>{const a=t[e];return(0,i.jsx)("div",{style:n,children:(0,i.jsx)(v,{chat:a,onClick:W,isSelected:G(a),avatar:(0,r.yN)({chat:a})})})},rowCount:B.length,rowHeight:48,rowProps:{},overscanCount:5,style:{width:"100%"}}):B.map((e,t)=>(0,i.jsx)(v,{chat:e,onClick:W,isSelected:G(e),avatar:(0,r.yN)({chat:e})},t)),!p&&"chat"===z&&(0,i.jsx)("div",{className:"flex justify-center px-1",children:(0,i.jsx)(x.A,{onClick:E})})]})})]})})},I=s.memo(function({icon:e,onClick:t}){return(0,i.jsxs)("div",{className:"py-2 px-2.5 select-none cursor-pointer font-bold rounded-md mr-1 w-full flex items-center gap-2 group",title:e.title,onClick:()=>{t&&t(e)},children:[(0,i.jsx)("div",{style:{fontSize:"28px"},className:`${e.className} group-hover:opacity-100`}),(0,i.jsx)("div",{className:"group-hover:text-white truncate text-gray-500",children:e.title})]})}),A=s.memo(z);a()}catch(e){a(e)}},1)},7426(e,t,n){n.a(e,async(e,a)=>{try{n.d(t,{e:()=>h});var i=n(7140),s=n(5987),o=n(3659).V,r=e([s]),c=r.then?(await r)():r;s=c[0];const{openCharacterChat:l}=await o("@script"),{openGroupChat:d}=await o("@scripts/groupChats");function h(){const e=(0,i.useCallback)(e=>{try{const t=e.file_id??e.file_name;return SillyTavern.getContext().chatId===t}catch{return!1}},[]),t=(0,i.useCallback)(e=>{const{characterId:t,groupId:n}=SillyTavern.getContext();return(void 0!==t||null!==n)&&(void 0!==t&&e?t==e:null!==n&&e?n==e:void 0!==t||null!==n)},[]);return{openChat:(0,i.useCallback)(async n=>{if(!n)return;if(e(n))return;const a=t();if(a){const e=void 0===n?.file_id;if(e){const{groupId:e}=SillyTavern.getContext();await d(e,n.file_name)}else e||await l(n.file_id);return}a||(n.is_group?await(0,s.eS)({id:n.group,chat_id:n.file_name}):void 0!==n?.char_id&&await(0,s.yG)(n.char_id,n.file_id))},[e,t]),isSelectedChat:e}}a()}catch(u){a(u)}},1)},7754(e,t,n){n.d(t,{A:()=>s});var a=n(5656),i=n(7140);const s=(0,i.memo)(({onClick:e})=>{const t=(0,i.useCallback)(()=>{e()},[e]);return(0,a.jsx)("button",{className:"w-full my-2 outline-dashed outline-1 cursor-pointer outline-gray-600 h-12 flex items-center justify-center rounded-md bg-discordia hover:bg-base-discordia-lighter  transition-colors",onClick:t,title:"Start a New Chat",children:(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})})})}};
//# sourceMappingURL=616.bundle.js.map