export const __webpack_esm_id__=800;export const __webpack_esm_ids__=[800,986];export const __webpack_esm_modules__={1949:(e,a,t)=>{t.d(a,{A:()=>c});var r=t(2714);const l=({children:e})=>(0,r.jsx)("div",{className:"p-4 flex-1 overflow-y-auto min-h-0 custom-scrollbar",children:e}),s=({children:e})=>(0,r.jsx)("div",{className:"rounded-b-lg flex shrink-0 justify-end space-x-2 p-4 border-t border-gray-700 w-full bg-base-discordia",children:e});var n=t(9378),o=t(7049);const i=({children:e,className:a=""})=>(0,r.jsx)("div",{className:`flex flex-col w-full h-full\n        bg-base-discordia rounded-lg shadow-2xl border border-gray-700\n        overflow-hidden ${a}`,children:e});i.Header=({title:e,onClose:a,children:t,canClose:l=!0})=>{const{closeModal:s}=(0,n.useContext)(o.Vs);return(0,r.jsxs)("div",{className:"px-4 py-4 shrink-0 border-b border-gray-700 flex items-center justify-between w-full",children:[(0,r.jsx)("div",{className:"text-lg font-semibold m-0",children:e??t}),(0,r.jsx)("div",{className:"flex items-center",children:l&&(0,r.jsx)("button",{onClick:()=>{a&&a(),s()},className:"text-gray-400  hover:text-white cursor-pointer focus:outline-none","aria-label":"Close modal",children:"âœ•"})})]})},i.Content=l,i.Footer=s;const c=i},2971:(e,a,t)=>{t.a(e,async(e,r)=>{try{t.d(a,{A:()=>m});var l=t(2714),s=t(9378),n=t(7049),o=t(4948),i=t(8986),c=t(1949),d=t(7257).V;const{getThumbnailUrl:e}=await d("@script"),{getContext:u}=SillyTavern,m=({onClose:a,avatarName:t,onSave:r})=>{const[d,m]=(0,s.useState)(null),{closeModal:h}=(0,s.useContext)(n.Vs);(0,s.useEffect)(()=>{const e=u().characters.find(e=>e.avatar?.toString()===t);e&&m(e)},[t]);const b=()=>{a&&a(),h()},x=(0,s.useMemo)(()=>e("avatar",d?.avatar?.toString()||"default"),[d]);return(0,l.jsxs)(c.A,{children:[(0,l.jsx)(c.A.Header,{onClose:b,children:"Edit Character"}),(0,l.jsxs)(c.A.Content,{children:[(0,l.jsxs)("div",{className:"flex w-full align-top p-6",children:[(0,l.jsx)("div",{className:"w-32 flex items-center",children:(0,l.jsx)("img",{loading:"lazy",src:x,alt:"Avatar",className:"w-32 h-32 rounded-full object-cover border-2 border-gray-700 shrink-0"})}),(0,l.jsxs)("div",{className:"grow space-y-2 ms-4 relative top-4",children:[(0,l.jsx)("label",{className:"block text-sm font-medium mb-1",htmlFor:"name",children:"Name"}),(0,l.jsx)(i.default,{id:"name",type:"text",value:d?.name,onChange:()=>{}})]})]}),(0,l.jsxs)("div",{className:"p-3 w-full space-y-2",children:[(0,l.jsx)("label",{className:"block text-sm font-medium mb-1",htmlFor:"description",children:"Description"}),(0,l.jsx)(i.default,{id:"description",type:"text",value:d?.description,onChange:()=>{},growHeight:!0})]}),(0,l.jsxs)("div",{className:"p-3 w-full space-y-2",children:[(0,l.jsx)("label",{className:"block text-sm font-medium mb-1",htmlFor:"first_message",children:"First Message"}),(0,l.jsx)(i.default,{id:"first_message",type:"text",value:d?.first_mes,onChange:()=>{},growHeight:!0})]})]}),(0,l.jsxs)(c.A.Footer,{children:[(0,l.jsx)("div",{className:"grow",children:(0,l.jsx)(o.A,{look:o.m.DANGER,onClick:b,children:"Delete"})}),(0,l.jsx)(o.A,{look:o.m.TRANSPARENT,onClick:b,children:"Cancel"}),(0,l.jsx)(o.A,{onClick:()=>{r&&r()},children:"Save"})]})]})};r()}catch(e){r(e)}},1)},3800:(e,a,t)=>{t.a(e,async(e,r)=>{try{t.r(a),t.d(a,{default:()=>b});var l=t(2714),s=t(9378),n=t(7916),o=t(7474),i=t(7049),c=t(2971),d=t(7257).V,u=e([n,c]);[n,c]=u.then?(await u)():u;const{getThumbnailUrl:m}=await d("@script"),h=({entity:e,isSelected:a,onSelect:t,index:r})=>{const[d,u]=(0,s.useState)(!1),{showContextMenu:h}=(0,s.useContext)(o.Kh),{openModal:b}=(0,s.useContext)(i.Vs);(0,s.useEffect)(()=>{let e;return d&&(e=setTimeout(()=>{u(!1)},3e3)),()=>clearTimeout(e)},[d]);const x=(0,s.useMemo)(()=>[{label:e.item?.name||"Character",disabled:!0},{label:"---",variant:"separator"},{label:"Edit",onClick:()=>{b((0,l.jsx)(c.A,{avatarName:e.item?.avatar.toString()||""}))}},{label:"Duplicate"},{label:"Export"},{label:"---",variant:"separator"},{label:"Delete",variant:"danger"}],[e]),p=(0,s.useCallback)(e=>{e.preventDefault(),h(e,x)},[e,r,h]),g=(0,s.useMemo)(()=>m("avatar",e.item?.avatar||e.id),[e]);return(0,l.jsxs)("div",{className:"flex m-0 relative w-full h-fit",onContextMenu:p,children:[(0,l.jsx)("div",{className:"absolute start-0 top-0 w-2 justify-start items-center flex h-full",children:(0,l.jsx)("span",{style:{borderRadius:"0 4px 4px 0"},className:"w-2 h-0 absolute block transition ease-in-out duration-500 -ms-1 bg-white "+(d?" h-6":"")+(a?" h-8":"")})}),(0,l.jsx)("div",{onMouseEnter:()=>{u(!0)},onMouseLeave:()=>{u(!1)},onClick:()=>{t&&t(e,r)},className:"cursor-pointer w-full h-fit flex justify-center items-center",children:"group"===e.type?(0,l.jsx)(n.A,{groupItem:e.item}):(0,l.jsx)("img",{loading:"lazy",alt:e.item?.name||"Character",className:"rounded-xl h-12 w-12 object-cover hover:outline-1 outline-white "+(a?"outline":""),src:g})})]})},b=(0,s.memo)(h);r()}catch(e){r(e)}},1)},4948:(e,a,t)=>{t.d(a,{A:()=>n,m:()=>r});var r,l=t(2714),s=t(9378);!function(e){e.DANGER="danger",e.PRIMARY="primary",e.SECONDARY="secondary",e.TRANSPARENT="transparent"}(r||(r={}));const n=(0,s.memo)(({label:e,onClick:a,children:t,disabled:n=!1,look:o=r.PRIMARY})=>{const i=(0,s.useCallback)(()=>{!n&&a&&a()},[n,a]),c=(0,s.useCallback)(()=>{switch(o){case r.DANGER:return"bg-red-600 hover:bg-red-700 border-red-700";case r.SECONDARY:return"bg-gray-600 hover:bg-gray-700 border-gray-700";case r.PRIMARY:return"hover:bg-blurple-lighter bg-blurple border-blurple";case r.TRANSPARENT:return"bg-transparent hover:border-blurple border-white";default:return"hover:bg-blurple-lighter bg-blurple border-blurple"}},[o]),d=(0,s.useMemo)(()=>c(),[c]);return(0,l.jsx)("button",{className:`px-4 py-2 text-white font-bold border cursor-pointer rounded disabled:opacity-50 ${d}`,onClick:i,disabled:n,children:e||t})})},7916:(e,a,t)=>{t.a(e,async(e,r)=>{try{t.d(a,{A:()=>u});var l=t(2714),s=t(9378),n=t(7257).V;const{getThumbnailUrl:e,characters:o,default_avatar:i}=await n("@script"),{isValidUrl:c}=await n("@scripts/utils"),d=({groupItem:a})=>{const t=(0,s.useMemo)(()=>{if(!a)return(0,l.jsx)("img",{src:i});if(c(a.avatar_url))return(0,l.jsx)("div",{className:"avatar",title:`[Group] ${a.name}`,children:(0,l.jsx)("img",{loading:"lazy",src:a.avatar_url})});const t=[];if(Array.isArray(a?.members))for(const r of a.members){const a=o.findIndex(e=>e.avatar===r);if(-1!==a&&"none"!==o[a]?.avatar&&t.push(e("avatar",o[a]?.avatar||i)),4===t.length)break}const r=t.length;return r<1?(0,l.jsx)("img",{src:i}):(0,l.jsx)("div",{id:"group_avatars_template",className:`collage_${r} group-avatar`,title:`[Group] ${a.name}`,children:t.map((e,a)=>(0,l.jsx)("img",{className:`img_${a+1}`,src:e},a))})},[a]);return(0,l.jsx)(l.Fragment,{children:t})},u=(0,s.memo)(d);r()}catch(e){r(e)}},1)},8986:(e,a,t)=>{t.r(a),t.d(a,{default:()=>s});var r=t(2714),l=t(9378);const s=(0,l.memo)(({placeholder:e="",defaultValue:a="",value:t,label:s="",onChange:n,style:o,disabled:i=!1,id:c="",type:d="text",growHeight:u=!1})=>{const[m,h]=(0,l.useState)(t??a??""),b=(0,l.useRef)(null);(0,l.useEffect)(()=>{void 0!==t&&h(t)},[t]);const x=(0,l.useCallback)(e=>{const a=e.target.value;h(a),n(a)},[n]);return(0,l.useEffect)(()=>{u&&b.current&&(b.current.style.height="auto",b.current.style.height=`${b.current.scrollHeight}px`)},[m,u]),(0,r.jsxs)("div",{className:"flex flex-col w-full gap-1 ",style:o,children:[s&&(0,r.jsx)("label",{className:"text-sm font-medium mb-1",htmlFor:c,children:s}),u?(0,r.jsx)("textarea",{ref:b,id:c,disabled:i,className:"input-field max-h-40 w-full px-3 py-2 bg-input-bg rounded-md outline outline-input-outline focus:ring-2 focus:ring-input-ring resize-none text-wrap wrap-break-word",placeholder:e,value:m,onChange:x,rows:1}):(0,r.jsx)("input",{contentEditable:u,id:c,disabled:i,className:"input-field w-full px-3 py-2 bg-input-bg rounded-md outline outline-input-outline focus:ring-2 focus:ring-input-ring",placeholder:e,type:d,value:m,onChange:x})]})})}};
//# sourceMappingURL=800.bundle.js.map